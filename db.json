{"meta":{"version":1,"warehouse":"4.0.2"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-icarus/source/css/cyberpunk.styl","path":"css/cyberpunk.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/css/default.styl","path":"css/default.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/favicon.svg","path":"img/favicon.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/logo.svg","path":"img/logo.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/og_image.png","path":"img/og_image.png","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/razor-bottom-black.svg","path":"img/razor-bottom-black.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/img/razor-top-black.svg","path":"img/razor-top-black.svg","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/js/animation.js","path":"js/animation.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/js/back_to_top.js","path":"js/back_to_top.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/js/column.js","path":"js/column.js","modified":0,"renderable":1},{"_id":"node_modules/hexo-theme-icarus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"source/images/avatar2.png","path":"images/avatar2.png","modified":0,"renderable":0},{"_id":"source/images/johnson_pseudo_code.png","path":"images/johnson_pseudo_code.png","modified":0,"renderable":0},{"_id":"source/images/johnson_step_1.png","path":"images/johnson_step_1.png","modified":0,"renderable":0},{"_id":"source/images/johnson_step_2.png","path":"images/johnson_step_2.png","modified":0,"renderable":0},{"_id":"source/images/johnson_step_3.png","path":"images/johnson_step_3.png","modified":0,"renderable":0},{"_id":"source/images/johnson_step_4.png","path":"images/johnson_step_4.png","modified":0,"renderable":0},{"_id":"source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":0},{"_id":"themes/icarus/source/css/cyberpunk.styl","path":"css/cyberpunk.styl","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/default.styl","path":"css/default.styl","modified":0,"renderable":1},{"_id":"themes/icarus/source/css/style.styl","path":"css/style.styl","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/favicon.svg","path":"img/favicon.svg","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/logo.svg","path":"img/logo.svg","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/og_image.png","path":"img/og_image.png","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","path":"img/razor-bottom-black.svg","modified":0,"renderable":1},{"_id":"themes/icarus/source/img/razor-top-black.svg","path":"img/razor-top-black.svg","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/animation.js","path":"js/animation.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/back_to_top.js","path":"js/back_to_top.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/icarus/source/js/column.js","path":"js/column.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/index.md","hash":"16e55ee5a903617d3fb5dcd386a0c0e913a7cacf","modified":1677339147398},{"_id":"source/.obsidian/core-plugins-migration.json","hash":"46d9be486f2fb0a1a6262ab8fe3c07ce989234a3","modified":1676741317176},{"_id":"source/.obsidian/hotkeys.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1676741316665},{"_id":"source/.obsidian/appearance.json","hash":"9439122150a0431e432676115220bc925af96094","modified":1676741317671},{"_id":"source/_posts/implementation_of_libcxx_any.md","hash":"8e03451f7b5be6fe659120d0a88b80ebcfca59ed","modified":1676740975011},{"_id":"source/_posts/Find-all-simple-circles-in-directed-graph-Johnson-Algorithm.md","hash":"3835864a067ac9bb029772abcf19b036ab8719ef","modified":1676784238986},{"_id":"source/.obsidian/core-plugins.json","hash":"7a7e9dd69d4a2756327ee34721177b712177bb3f","modified":1676741317174},{"_id":"source/images/johnson_step_2.png","hash":"ab8dae1afec2950a3414f3d5a3e3d9dc8ccd8e44","modified":1676741964807},{"_id":"source/.obsidian/workspace.json","hash":"c056e0e4ebd07784cd91b2128c52c877c684438a","modified":1676741823472},{"_id":"source/.obsidian/app.json","hash":"bf21a9e8fbc5a3846fb05b4fa0859e0917b2202f","modified":1676741317669},{"_id":"source/images/johnson_step_3.png","hash":"32a13be213f927ace308877f555c82249dd536a9","modified":1676741964807},{"_id":"source/images/johnson_step_4.png","hash":"60322af1b5b80e2a68a4daff32b431b77aa538e4","modified":1676741964808},{"_id":"source/images/logo.svg","hash":"14db279da62f3ebcd7ce9f6d3b915eb557e1d2f9","modified":1676739319918},{"_id":"source/images/johnson_step_1.png","hash":"1ddbc262066d8c9f1c7c944db849e52e061a26aa","modified":1676741964806},{"_id":"node_modules/hexo-theme-icarus/layout/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/layout/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/layout/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/layout/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/layout/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/include/schema/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334459},{"_id":"node_modules/hexo-theme-icarus/include/schema/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334460},{"_id":"node_modules/hexo-theme-icarus/include/schema/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334460},{"_id":"node_modules/hexo-theme-icarus/include/schema/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334461},{"_id":"node_modules/hexo-theme-icarus/include/schema/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1670163334461},{"_id":"node_modules/hexo-theme-icarus/package.json","hash":"0af7425c7201d97fb2e1acfaa990e7fcb2afcc53","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/config.js","hash":"1ff0f174e9670074ad2bee890d5b6da486800c9a","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/register.js","hash":"ec6596b63bfb4349ba61792d905abe8e06fea625","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/dependency.js","hash":"0ca35dec92ccf383f45db905db1a5a0e92d7209e","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/CONTRIBUTING.md","hash":"70254c6778c1e41bb2ff222bbf3a70b2239b9bc1","modified":1670163334780},{"_id":"node_modules/hexo-theme-icarus/README.md","hash":"32f9f4fc8cd7ec60b30544bd2e558b593519ae5d","modified":1670163334780},{"_id":"node_modules/hexo-theme-icarus/languages/de.yml","hash":"78421f09961ca0b24756a0688fb2cb2e2696e25f","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/LICENSE","hash":"86037e5335a49321fa73b7815cab542057fac944","modified":1670163334462},{"_id":"node_modules/hexo-theme-icarus/languages/es.yml","hash":"38579b8fad4b6997362acc770615bcd85ff20f68","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/en.yml","hash":"3d674204d9f723c829226da745afddd180c1131d","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/fr.yml","hash":"06d5c819d6108a42b28cff7b52e5410d0bed55d1","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/id.yml","hash":"5e48b1d62378cadeb64b88349477726a5c1bae47","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/ja.yml","hash":"801d9930fef48d6a3f80470d5bed4f3eb78147e6","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/ko.yml","hash":"e3374265377809c1518114cf352b595840c0b416","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/pl.yml","hash":"2e7debb44cd91096f30efc87bf8d6b1d0d0214c9","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/ru.yml","hash":"9d91358c2acbe7a0f2a25daf7f65b999ff32d068","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/tk.yml","hash":"ca583168bd2025124a1cd0e977da475d7a7496fd","modified":1670163335720},{"_id":"node_modules/hexo-theme-icarus/languages/pt-BR.yml","hash":"ee8f73350e4c6e2f63b7fc72b34472a6b1e21244","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/languages/tr.yml","hash":"dd0a7bfe14848d6e1aa229198fe1db03e08e305e","modified":1670163335720},{"_id":"node_modules/hexo-theme-icarus/languages/vn.yml","hash":"5f2fffa642110c81d8f529949711c9d19ad6bbbe","modified":1670163335720},{"_id":"node_modules/hexo-theme-icarus/languages/zh-CN.yml","hash":"02475ba14afc70dfeaf5678467cee307835e4efa","modified":1670163335720},{"_id":"node_modules/hexo-theme-icarus/languages/zh-TW.yml","hash":"a6826e0c8cdb9ad286324b682b466a9e2ad78e6f","modified":1670163335720},{"_id":"node_modules/hexo-theme-icarus/layout/archive.jsx","hash":"05677e93d4a43f417dbbf0d63ca37a99e6349e3b","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/layout/categories.jsx","hash":"b8ad43e28a4990d222bfbb95b032f88555492347","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/layout/category.jsx","hash":"fd15e4eac32de9ac8687aeb3dbe179ab61375700","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/layout/layout.jsx","hash":"37ac0bb11a1b4cc88bb2d127829194f62e39cde5","modified":1676783161221},{"_id":"node_modules/hexo-theme-icarus/layout/page.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1670163334778},{"_id":"node_modules/hexo-theme-icarus/layout/index.jsx","hash":"0a84a2348394fa9fc5080dd396bd28d357594f47","modified":1670163334777},{"_id":"node_modules/hexo-theme-icarus/include/migration/head.js","hash":"7189efe33d18927d3790e8afb06642fb293b8603","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/scripts/index.js","hash":"0c666db6fcb4ffc4d300f4e108c00ee42b1cbbe6","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/layout/post.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1670163334778},{"_id":"node_modules/hexo-theme-icarus/layout/tags.jsx","hash":"2c42cb64778235dd220c563a27a92108ddc50cc4","modified":1670163334779},{"_id":"node_modules/hexo-theme-icarus/include/migration/v2_v3.js","hash":"3ccb2d2ce11018bebd7172da66faecc3983bff00","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/migration/v3_v4.js","hash":"9faf2184d7fe87debfbe007f3fc9079dcbcafcfe","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/migration/v5_v5.1.js","hash":"073f22bd16e34b56f016633b1676dab2e7d8843d","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/config.json","hash":"b949c52d02d5ee520ae4666a016ce91faf6fb350","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/layout/tag.jsx","hash":"d2f18cac32ca2725d34ccff3f2051c623be6c892","modified":1670163334779},{"_id":"node_modules/hexo-theme-icarus/include/migration/v4_v5.js","hash":"6342310892d113763b5544789b45d44c0ccf2854","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/style/article.styl","hash":"105c983871b6c9148d97a0f756886e56411572bd","modified":1670163335715},{"_id":"node_modules/hexo-theme-icarus/include/style/base.styl","hash":"2bca6ad099949d52236c87db8db1002ffb99774c","modified":1670163335715},{"_id":"node_modules/hexo-theme-icarus/include/style/button.styl","hash":"0fb35b4786be1b387c751fa2849bc71523fcedd4","modified":1670163335716},{"_id":"node_modules/hexo-theme-icarus/include/style/card.styl","hash":"f78674422eb408cd17c17bbdc3ee1ebe4a453e05","modified":1670163335716},{"_id":"node_modules/hexo-theme-icarus/include/style/donate.styl","hash":"8d0af00628c13134b5f30a558608e7bebf18c2ec","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/footer.styl","hash":"a4ad715dee38b249538ac6cce94efc9b355a904b","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/codeblock.styl","hash":"ec54dc24eb4d9802d8fefc44c210558bc1641109","modified":1670163335716},{"_id":"node_modules/hexo-theme-icarus/include/style/helper.styl","hash":"9f3393e6122cc9f351091bfab960674e962da343","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/navbar.styl","hash":"34f09b144cb46a25ec2cc7260a6c207dd34ff1fe","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/pagination.styl","hash":"b81bcd7ff915b4e9299533addc01bc4575ec35e3","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/plugin.styl","hash":"084843d5a522029e0f84a4fe791fbcb2cabd4c36","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/include/style/timeline.styl","hash":"ea61798a09bffdda07efb93c2ff800b63bddc4c4","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/include/util/console.js","hash":"59cf9d277d3ac85a496689bd811b1c316001641d","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/style/widget.styl","hash":"c746902251136544eb3fe523235b3183f4189460","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/layout/common/article.jsx","hash":"e2765287c6bc6eb97975a1bb4e325b046e95b392","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/layout/common/comment.jsx","hash":"427089c33002707b76e2f38709459a6824fd0f9b","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/include/style/responsive.styl","hash":"3ba680f5c8a958bf33749d719b4b29fddb5ce0af","modified":1676783311372},{"_id":"node_modules/hexo-theme-icarus/layout/common/donates.jsx","hash":"889fb0a7ccc502f0a43b4a18eb330e351e50493c","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/include/style/search.styl","hash":"416737e1da4e7e907bd03609b0fee9e2aacfe56c","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/layout/common/head.jsx","hash":"2ec1f511f32e3a9c86d49f1338f57ae5ece18898","modified":1670163334777},{"_id":"node_modules/hexo-theme-icarus/layout/common/footer.jsx","hash":"baa8e40e036a3ec0114d96893b708435104b4ba9","modified":1670163334775},{"_id":"node_modules/hexo-theme-icarus/layout/common/plugins.jsx","hash":"f6826c1a5f5f59f4a0aa00c63bdb0ad4ff4eab69","modified":1670163334778},{"_id":"node_modules/hexo-theme-icarus/layout/common/search.jsx","hash":"6f244a37293031670a2964fe424ecd062e591d7b","modified":1670163334779},{"_id":"node_modules/hexo-theme-icarus/layout/common/scripts.jsx","hash":"0fe1fddab431fb9f63906d8c480d5cd6b33abc32","modified":1670163334778},{"_id":"node_modules/hexo-theme-icarus/layout/common/share.jsx","hash":"c9fb0319ad5e5a10ad3636b26a6c2afed14c590f","modified":1670163334779},{"_id":"node_modules/hexo-theme-icarus/layout/plugin/animejs.jsx","hash":"e2aa27c3501a58ef1e91e511557b77395c2c02aa","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/layout/common/navbar.jsx","hash":"d96e501e52861056474659f96ee0206588d8c93a","modified":1670163334777},{"_id":"node_modules/hexo-theme-icarus/layout/widget/profile.jsx","hash":"0d3a7fd922c12cc45d2c8d26a8f4d3a9a6ed0ae0","modified":1670163334778},{"_id":"node_modules/hexo-theme-icarus/source/css/cyberpunk.styl","hash":"ae17d3528df0c3f089df14a06b7bd82f1bc5fed9","modified":1670163335716},{"_id":"node_modules/hexo-theme-icarus/source/css/default.styl","hash":"b01da3028e5a1267a40aaae5c86a11187a2259e3","modified":1670163335717},{"_id":"node_modules/hexo-theme-icarus/layout/common/widgets.jsx","hash":"0cd12e491822e62e6e40b49155482e148b37c929","modified":1676907956366},{"_id":"node_modules/hexo-theme-icarus/layout/plugin/back_to_top.jsx","hash":"7fc0c5aaabd7d0eaff04cb68ec139442dc3414e8","modified":1670163334466},{"_id":"node_modules/hexo-theme-icarus/source/css/style.styl","hash":"5b9815586e993a6ccbe8cdcfc0c65ea38fc315ac","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/source/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/source/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/source/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1670163335718},{"_id":"node_modules/hexo-theme-icarus/source/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1670163335719},{"_id":"node_modules/hexo-theme-icarus/source/js/animation.js","hash":"12cedd5caaf9109eed97e50eeab8f883f6e49be3","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/source/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/source/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/comment.json","hash":"f49270b619f5d2c3decde6b0b5a0c3bbab4b54a5","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/donates.json","hash":"ae86e6f177bedf4afbe638502c12635027539305","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/footer.json","hash":"09d706cbb94d6da9a0d15c719ce7139325cae1c7","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/article.json","hash":"e2502c39045c6a26ccd8e880858f93e78c7bda35","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/providers.json","hash":"97ec953d497fb53594227ae98acaef8a8baa91da","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/plugins.json","hash":"6036a805749816416850d944f7d64aaae62e5e75","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/source/js/main.js","hash":"08a2641765eeaf712157ad134dd675e3f7708ae2","modified":1670163334463},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/head.json","hash":"98889f059c635e6bdbd51effd04cf1cf44968a66","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/source/img/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1670163335546},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/share.json","hash":"cf4f9ff4fb27c3541b35f57db355c228fa6873e4","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/navbar.json","hash":"6691e587284c4cf450e0288680d5ff0f3565f090","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/search.json","hash":"985fbcbf47054af714ead1a124869d54f2a8b607","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/widgets.json","hash":"cadd9dc942740ecd5037d3943e72f8b6a8399bbe","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/include/schema/common/sidebar.json","hash":"eb241beaec4c73e3085dfb3139ce72e827e20549","modified":1670163334465},{"_id":"node_modules/hexo-theme-icarus/include/schema/plugin/animejs.json","hash":"e62ab6e20bd8862efa1ed32e7c0db0f8acbcfdec","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/plugin/back_to_top.json","hash":"dc0febab7e7b67075d0ad3f80f5ec8b798b68dea","modified":1670163334464},{"_id":"node_modules/hexo-theme-icarus/include/schema/widget/profile.json","hash":"690ee1b0791cab47ea03cf42b5b4932ed2aa5675","modified":1670163334465},{"_id":"source/images/johnson_pseudo_code.png","hash":"8d0a355047050e5b1b20aba74c3cf674e8d57e15","modified":1676741594170},{"_id":"node_modules/hexo-theme-icarus/source/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1670163335713},{"_id":"source/images/avatar2.png","hash":"98d112c009335943f58ef1bfbb2a8e5d4bd8c119","modified":1676784001956},{"_id":"public/js/algolia.js","hash":"a8df0c0abeeb4ee1d2d720161f3aea7339380704","modified":1677339543203},{"_id":"public/js/google_cse.js","hash":"1a9881669dfdeb2b3214074eee0d3e01e52db2c4","modified":1677339543203},{"_id":"public/js/insight.js","hash":"86bbdb7305d9bf19ad62d2ca2cf169fc8d9f9d31","modified":1677339543203},{"_id":"public/js/toc.js","hash":"da6fb757a1b083b8ed138bf29aad3a7bf8ec4f11","modified":1677339543203},{"_id":"public/content.json","hash":"23ff7fe9fc5830068137170d7f90580a1bbadabe","modified":1677339543203},{"_id":"public/manifest.json","hash":"831d1345eec27beac4e08a7674d557e5b5a6ff2c","modified":1677339543203},{"_id":"public/index.html","hash":"8418ae33ca4b8d99eeaee5de7cbc65e69f1e3362","modified":1677339543203},{"_id":"public/archives/index.html","hash":"21151e8721de0150e513cd73add80ff998fe4166","modified":1677339543203},{"_id":"public/archives/2022/index.html","hash":"a287e50f3176a2d450e7e07ae2d6d1d5f0be8df1","modified":1677339543203},{"_id":"public/archives/2022/12/index.html","hash":"857c377a72db81e73bdc674fb461f8371a1f8c1e","modified":1677339543203},{"_id":"public/archives/2023/index.html","hash":"89d11213c7f6ecf8644c4f53b4d9efb23df9b6e9","modified":1677339543203},{"_id":"public/archives/2023/02/index.html","hash":"b9d6e8ac0b36038e8c1bc847956882d2ae65aff3","modified":1677339543203},{"_id":"public/blog/Find-all-simple-circles-in-directed-graph-Johnson-Algorithm/index.html","hash":"eead24416ee29c67c3a2f454dd6a869597ad2ba5","modified":1677339543203},{"_id":"public/blog/implementation_of_libcxx_any/index.html","hash":"a439fb5116e718d908399b9c209f50d4a412d5a5","modified":1677339543203},{"_id":"public/categories/blog/index.html","hash":"03d9ed681f9f8835eb668500b90b18ea6ad03927","modified":1677339543203},{"_id":"public/tags/algorithm/index.html","hash":"9713adff32369dc424a3adfbcc54707465f6b6f2","modified":1677339543203},{"_id":"public/tags/c/index.html","hash":"2ff5a122bd9226a4d0e13b41c559c0b386b37a7f","modified":1677339543203},{"_id":"public/categories/index.html","hash":"fde89c8aa667e9b2560a1442de68f048f94df4d6","modified":1677339543203},{"_id":"public/tags/index.html","hash":"bb310628c98982c95bc15f221ddceafe84ffe66e","modified":1677339543203},{"_id":"public/tags/libc/index.html","hash":"b1f333fcad8e5094cac7f73171b4f77576ceb7f2","modified":1677339543203},{"_id":"public/source/index.md/index.html","hash":"fdba534a03bca9718e6204aa53cd19e873948d31","modified":1677339543203},{"_id":"public/img/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1677339543203},{"_id":"public/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1677339543203},{"_id":"public/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1677339543203},{"_id":"public/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1677339543203},{"_id":"public/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1677339543203},{"_id":"public/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1677339543203},{"_id":"public/images/johnson_step_2.png","hash":"ab8dae1afec2950a3414f3d5a3e3d9dc8ccd8e44","modified":1677339543203},{"_id":"public/images/johnson_step_4.png","hash":"60322af1b5b80e2a68a4daff32b431b77aa538e4","modified":1677339543203},{"_id":"public/images/logo.svg","hash":"14db279da62f3ebcd7ce9f6d3b915eb557e1d2f9","modified":1677339543203},{"_id":"public/images/johnson_step_3.png","hash":"32a13be213f927ace308877f555c82249dd536a9","modified":1677339543203},{"_id":"public/images/johnson_step_1.png","hash":"1ddbc262066d8c9f1c7c944db849e52e061a26aa","modified":1677339543203},{"_id":"public/js/animation.js","hash":"12cedd5caaf9109eed97e50eeab8f883f6e49be3","modified":1677339543203},{"_id":"public/js/main.js","hash":"08a2641765eeaf712157ad134dd675e3f7708ae2","modified":1677339543203},{"_id":"public/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1677339543203},{"_id":"public/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1677339543203},{"_id":"public/css/style.css","hash":"f99f9cb311d38db887d442e210199539d8d5b74f","modified":1677339543203},{"_id":"public/css/default.css","hash":"f99f9cb311d38db887d442e210199539d8d5b74f","modified":1677339543203},{"_id":"public/css/cyberpunk.css","hash":"080b5d0c6821ec9439e32f9c13df59b4b676f3e0","modified":1677339543203},{"_id":"public/images/johnson_pseudo_code.png","hash":"8d0a355047050e5b1b20aba74c3cf674e8d57e15","modified":1677339543203},{"_id":"public/images/avatar2.png","hash":"98d112c009335943f58ef1bfbb2a8e5d4bd8c119","modified":1677339543203},{"_id":"themes/icarus/layout/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147404},{"_id":"themes/icarus/layout/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147406},{"_id":"themes/icarus/layout/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147406},{"_id":"themes/icarus/layout/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147406},{"_id":"themes/icarus/layout/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147406},{"_id":"themes/icarus/include/schema/comment/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147399},{"_id":"themes/icarus/include/schema/donate/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147401},{"_id":"themes/icarus/include/schema/misc/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147401},{"_id":"themes/icarus/CONTRIBUTING.md","hash":"70254c6778c1e41bb2ff222bbf3a70b2239b9bc1","modified":1677339147398},{"_id":"themes/icarus/README.md","hash":"32f9f4fc8cd7ec60b30544bd2e558b593519ae5d","modified":1677339147399},{"_id":"themes/icarus/package.json","hash":"12286a234afa983e9094cbc911ee7b54361999d9","modified":1677339537502},{"_id":"themes/icarus/LICENSE","hash":"86037e5335a49321fa73b7815cab542057fac944","modified":1677339147399},{"_id":"themes/icarus/include/schema/share/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147401},{"_id":"themes/icarus/include/dependency.js","hash":"0ca35dec92ccf383f45db905db1a5a0e92d7209e","modified":1677339147399},{"_id":"themes/icarus/include/register.js","hash":"ec6596b63bfb4349ba61792d905abe8e06fea625","modified":1677339147399},{"_id":"themes/icarus/include/schema/search/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1677339147401},{"_id":"themes/icarus/languages/de.yml","hash":"78421f09961ca0b24756a0688fb2cb2e2696e25f","modified":1677339147403},{"_id":"themes/icarus/include/config.js","hash":"1ff0f174e9670074ad2bee890d5b6da486800c9a","modified":1677339147399},{"_id":"themes/icarus/languages/es.yml","hash":"38579b8fad4b6997362acc770615bcd85ff20f68","modified":1677339147403},{"_id":"themes/icarus/languages/en.yml","hash":"3d674204d9f723c829226da745afddd180c1131d","modified":1677339147403},{"_id":"themes/icarus/languages/fr.yml","hash":"06d5c819d6108a42b28cff7b52e5410d0bed55d1","modified":1677339147403},{"_id":"themes/icarus/languages/ja.yml","hash":"801d9930fef48d6a3f80470d5bed4f3eb78147e6","modified":1677339147403},{"_id":"themes/icarus/languages/id.yml","hash":"5e48b1d62378cadeb64b88349477726a5c1bae47","modified":1677339147403},{"_id":"themes/icarus/languages/tk.yml","hash":"ca583168bd2025124a1cd0e977da475d7a7496fd","modified":1677339147404},{"_id":"themes/icarus/languages/ko.yml","hash":"e3374265377809c1518114cf352b595840c0b416","modified":1677339147403},{"_id":"themes/icarus/languages/pl.yml","hash":"2e7debb44cd91096f30efc87bf8d6b1d0d0214c9","modified":1677339147403},{"_id":"themes/icarus/languages/pt-BR.yml","hash":"ee8f73350e4c6e2f63b7fc72b34472a6b1e21244","modified":1677339147403},{"_id":"themes/icarus/languages/tr.yml","hash":"dd0a7bfe14848d6e1aa229198fe1db03e08e305e","modified":1677339147404},{"_id":"themes/icarus/languages/ru.yml","hash":"9d91358c2acbe7a0f2a25daf7f65b999ff32d068","modified":1677339147404},{"_id":"themes/icarus/languages/zh-TW.yml","hash":"a6826e0c8cdb9ad286324b682b466a9e2ad78e6f","modified":1677339147404},{"_id":"themes/icarus/languages/vn.yml","hash":"5f2fffa642110c81d8f529949711c9d19ad6bbbe","modified":1677339147404},{"_id":"themes/icarus/languages/zh-CN.yml","hash":"02475ba14afc70dfeaf5678467cee307835e4efa","modified":1677339147404},{"_id":"themes/icarus/scripts/index.js","hash":"0c666db6fcb4ffc4d300f4e108c00ee42b1cbbe6","modified":1677339147407},{"_id":"themes/icarus/layout/archive.jsx","hash":"05677e93d4a43f417dbbf0d63ca37a99e6349e3b","modified":1677339147404},{"_id":"themes/icarus/layout/categories.jsx","hash":"b8ad43e28a4990d222bfbb95b032f88555492347","modified":1677339147404},{"_id":"themes/icarus/layout/category.jsx","hash":"fd15e4eac32de9ac8687aeb3dbe179ab61375700","modified":1677339147404},{"_id":"themes/icarus/layout/index.jsx","hash":"0a84a2348394fa9fc5080dd396bd28d357594f47","modified":1677339147406},{"_id":"themes/icarus/layout/layout.jsx","hash":"37ac0bb11a1b4cc88bb2d127829194f62e39cde5","modified":1677339147406},{"_id":"themes/icarus/layout/page.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1677339147406},{"_id":"themes/icarus/layout/tag.jsx","hash":"d2f18cac32ca2725d34ccff3f2051c623be6c892","modified":1677339147407},{"_id":"themes/icarus/layout/post.jsx","hash":"d26c2db57e5a88d6483a03aeb51cda9d191d8cea","modified":1677339147406},{"_id":"themes/icarus/include/migration/head.js","hash":"7189efe33d18927d3790e8afb06642fb293b8603","modified":1677339147399},{"_id":"themes/icarus/layout/tags.jsx","hash":"2c42cb64778235dd220c563a27a92108ddc50cc4","modified":1677339147407},{"_id":"themes/icarus/include/migration/v3_v4.js","hash":"9faf2184d7fe87debfbe007f3fc9079dcbcafcfe","modified":1677339147399},{"_id":"themes/icarus/include/migration/v2_v3.js","hash":"3ccb2d2ce11018bebd7172da66faecc3983bff00","modified":1677339147399},{"_id":"themes/icarus/include/migration/v5_v5.1.js","hash":"073f22bd16e34b56f016633b1676dab2e7d8843d","modified":1677339147399},{"_id":"themes/icarus/include/migration/v4_v5.js","hash":"6342310892d113763b5544789b45d44c0ccf2854","modified":1677339147399},{"_id":"themes/icarus/include/util/console.js","hash":"59cf9d277d3ac85a496689bd811b1c316001641d","modified":1677339147403},{"_id":"themes/icarus/include/style/base.styl","hash":"2bca6ad099949d52236c87db8db1002ffb99774c","modified":1677339147402},{"_id":"themes/icarus/include/style/button.styl","hash":"0fb35b4786be1b387c751fa2849bc71523fcedd4","modified":1677339147402},{"_id":"themes/icarus/include/style/article.styl","hash":"105c983871b6c9148d97a0f756886e56411572bd","modified":1677339147401},{"_id":"themes/icarus/include/schema/config.json","hash":"b949c52d02d5ee520ae4666a016ce91faf6fb350","modified":1677339147401},{"_id":"themes/icarus/include/style/card.styl","hash":"f78674422eb408cd17c17bbdc3ee1ebe4a453e05","modified":1677339147402},{"_id":"themes/icarus/include/style/codeblock.styl","hash":"ec54dc24eb4d9802d8fefc44c210558bc1641109","modified":1677339147402},{"_id":"themes/icarus/include/style/helper.styl","hash":"9f3393e6122cc9f351091bfab960674e962da343","modified":1677339147402},{"_id":"themes/icarus/include/style/donate.styl","hash":"8d0af00628c13134b5f30a558608e7bebf18c2ec","modified":1677339147402},{"_id":"themes/icarus/include/style/footer.styl","hash":"a4ad715dee38b249538ac6cce94efc9b355a904b","modified":1677339147402},{"_id":"themes/icarus/include/style/pagination.styl","hash":"b81bcd7ff915b4e9299533addc01bc4575ec35e3","modified":1677339147402},{"_id":"themes/icarus/include/style/responsive.styl","hash":"3ba680f5c8a958bf33749d719b4b29fddb5ce0af","modified":1677339147402},{"_id":"themes/icarus/include/style/navbar.styl","hash":"34f09b144cb46a25ec2cc7260a6c207dd34ff1fe","modified":1677339147402},{"_id":"themes/icarus/include/style/plugin.styl","hash":"084843d5a522029e0f84a4fe791fbcb2cabd4c36","modified":1677339147402},{"_id":"themes/icarus/include/style/search.styl","hash":"416737e1da4e7e907bd03609b0fee9e2aacfe56c","modified":1677339147402},{"_id":"themes/icarus/include/style/timeline.styl","hash":"ea61798a09bffdda07efb93c2ff800b63bddc4c4","modified":1677339147403},{"_id":"themes/icarus/include/style/widget.styl","hash":"c746902251136544eb3fe523235b3183f4189460","modified":1677339147403},{"_id":"themes/icarus/layout/common/comment.jsx","hash":"427089c33002707b76e2f38709459a6824fd0f9b","modified":1677339147405},{"_id":"themes/icarus/layout/common/article.jsx","hash":"e2765287c6bc6eb97975a1bb4e325b046e95b392","modified":1677339147404},{"_id":"themes/icarus/layout/common/donates.jsx","hash":"889fb0a7ccc502f0a43b4a18eb330e351e50493c","modified":1677339147405},{"_id":"themes/icarus/layout/common/head.jsx","hash":"2ec1f511f32e3a9c86d49f1338f57ae5ece18898","modified":1677339147405},{"_id":"themes/icarus/layout/common/footer.jsx","hash":"baa8e40e036a3ec0114d96893b708435104b4ba9","modified":1677339147405},{"_id":"themes/icarus/layout/common/plugins.jsx","hash":"f6826c1a5f5f59f4a0aa00c63bdb0ad4ff4eab69","modified":1677339147405},{"_id":"themes/icarus/layout/common/navbar.jsx","hash":"d96e501e52861056474659f96ee0206588d8c93a","modified":1677339147405},{"_id":"themes/icarus/layout/common/share.jsx","hash":"c9fb0319ad5e5a10ad3636b26a6c2afed14c590f","modified":1677339147405},{"_id":"themes/icarus/layout/common/scripts.jsx","hash":"0fe1fddab431fb9f63906d8c480d5cd6b33abc32","modified":1677339147405},{"_id":"themes/icarus/layout/common/search.jsx","hash":"6f244a37293031670a2964fe424ecd062e591d7b","modified":1677339147405},{"_id":"themes/icarus/layout/common/widgets.jsx","hash":"0cd12e491822e62e6e40b49155482e148b37c929","modified":1677339147405},{"_id":"themes/icarus/layout/plugin/animejs.jsx","hash":"e2aa27c3501a58ef1e91e511557b77395c2c02aa","modified":1677339147406},{"_id":"themes/icarus/layout/plugin/back_to_top.jsx","hash":"7fc0c5aaabd7d0eaff04cb68ec139442dc3414e8","modified":1677339147406},{"_id":"themes/icarus/source/css/default.styl","hash":"b01da3028e5a1267a40aaae5c86a11187a2259e3","modified":1677339147407},{"_id":"themes/icarus/source/css/cyberpunk.styl","hash":"ae17d3528df0c3f089df14a06b7bd82f1bc5fed9","modified":1677339147407},{"_id":"themes/icarus/layout/widget/profile.jsx","hash":"0d3a7fd922c12cc45d2c8d26a8f4d3a9a6ed0ae0","modified":1677339147407},{"_id":"themes/icarus/source/css/style.styl","hash":"5b9815586e993a6ccbe8cdcfc0c65ea38fc315ac","modified":1677339147407},{"_id":"themes/icarus/source/img/avatar.png","hash":"0d8236dcca871735500e9d06bbdbe0853ed6775b","modified":1677339147408},{"_id":"themes/icarus/source/img/favicon.svg","hash":"16fd847265845063a16596761cddb32926073dd2","modified":1677339147408},{"_id":"themes/icarus/source/img/logo.svg","hash":"e9b5c1438ddb576693a15d0713b2a1d9ceda4be9","modified":1677339147408},{"_id":"themes/icarus/source/img/og_image.png","hash":"b03f163096ca9c350ec962feee9836277b5c2509","modified":1677339147408},{"_id":"themes/icarus/source/img/razor-bottom-black.svg","hash":"a3eda07b1c605b456da9cdf335a1075db5e5d72c","modified":1677339147408},{"_id":"themes/icarus/source/js/animation.js","hash":"12cedd5caaf9109eed97e50eeab8f883f6e49be3","modified":1677339147408},{"_id":"themes/icarus/source/img/razor-top-black.svg","hash":"201f1171a43ce667a39091fe47c0f278857f18f0","modified":1677339147408},{"_id":"themes/icarus/source/js/main.js","hash":"08a2641765eeaf712157ad134dd675e3f7708ae2","modified":1677339147409},{"_id":"themes/icarus/source/js/back_to_top.js","hash":"d91f10c08c726135a13dfa1f422c49d8764ef03f","modified":1677339147409},{"_id":"themes/icarus/source/js/column.js","hash":"0baee024ab67474c073a4c41b495f3e7f0df4505","modified":1677339147409},{"_id":"themes/icarus/include/schema/common/comment.json","hash":"f49270b619f5d2c3decde6b0b5a0c3bbab4b54a5","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/article.json","hash":"e2502c39045c6a26ccd8e880858f93e78c7bda35","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/head.json","hash":"98889f059c635e6bdbd51effd04cf1cf44968a66","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/donates.json","hash":"ae86e6f177bedf4afbe638502c12635027539305","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/navbar.json","hash":"6691e587284c4cf450e0288680d5ff0f3565f090","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/footer.json","hash":"09d706cbb94d6da9a0d15c719ce7139325cae1c7","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/plugins.json","hash":"6036a805749816416850d944f7d64aaae62e5e75","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/providers.json","hash":"97ec953d497fb53594227ae98acaef8a8baa91da","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/search.json","hash":"985fbcbf47054af714ead1a124869d54f2a8b607","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/share.json","hash":"cf4f9ff4fb27c3541b35f57db355c228fa6873e4","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/widgets.json","hash":"cadd9dc942740ecd5037d3943e72f8b6a8399bbe","modified":1677339147400},{"_id":"themes/icarus/include/schema/common/sidebar.json","hash":"eb241beaec4c73e3085dfb3139ce72e827e20549","modified":1677339147400},{"_id":"themes/icarus/include/schema/plugin/back_to_top.json","hash":"dc0febab7e7b67075d0ad3f80f5ec8b798b68dea","modified":1677339147401},{"_id":"themes/icarus/include/schema/plugin/animejs.json","hash":"e62ab6e20bd8862efa1ed32e7c0db0f8acbcfdec","modified":1677339147401},{"_id":"themes/icarus/include/schema/widget/profile.json","hash":"690ee1b0791cab47ea03cf42b5b4932ed2aa5675","modified":1677339147401}],"Category":[{"name":"blog","_id":"clebil42t0004dvn7d7nmcsc2"}],"Data":[],"Page":[{"_content":"# Hao Zaijun\n\n## About me\n\nMy name is Hao Zaijun. I graduated from Shandong Univerty with a mater degree of biomedical engineering. I now work in Bytedance as a multimedia software development engineer.\n","source":"index.md","raw":"# Hao Zaijun\n\n## About me\n\nMy name is Hao Zaijun. I graduated from Shandong Univerty with a mater degree of biomedical engineering. I now work in Bytedance as a multimedia software development engineer.\n","date":"2023-02-25T15:32:27.398Z","updated":"2023-02-25T15:32:27.398Z","path":"index.html","_id":"clebil42m0000dvn74w6o6593","title":"","comments":1,"layout":"page","content":"<h1 id=\"Hao-Zaijun\"><a href=\"#Hao-Zaijun\" class=\"headerlink\" title=\"Hao Zaijun\"></a>Hao Zaijun</h1><h2 id=\"About-me\"><a href=\"#About-me\" class=\"headerlink\" title=\"About me\"></a>About me</h2><p>My name is Hao Zaijun. I graduated from Shandong Univerty with a mater degree of biomedical engineering. I now work in Bytedance as a multimedia software development engineer.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"Hao-Zaijun\"><a href=\"#Hao-Zaijun\" class=\"headerlink\" title=\"Hao Zaijun\"></a>Hao Zaijun</h1><h2 id=\"About-me\"><a href=\"#About-me\" class=\"headerlink\" title=\"About me\"></a>About me</h2><p>My name is Hao Zaijun. I graduated from Shandong Univerty with a mater degree of biomedical engineering. I now work in Bytedance as a multimedia software development engineer.</p>\n"}],"Post":[{"title":"Find all simple circles in a directed graph - Johnson Algorithm","date":"2023-02-18T17:25:19.000Z","_content":"\n# 综述\nJohnson算法由B. Johnson发表于1975年，用于在一个有向图中寻找所有简单环。时间复杂度上界为O((n+e)(c+1))，空间复杂度为O(n+e)，其中n为顶点数，e为边数，c为存在环数。在算法执行时，每两个连续的环的输出之间的时间不会超过O(n+e)。\n\n*常用的此类算法的复杂度比较如下：*\n- Tiernan - O(V.const^V)\n- Tarjan - O(VEC)\n- Johnson - O(((V+E)C)\n- Szwarcfiter and Lauer - O(V+EC)\n\n所谓的简单环，即除了第一个和最后一个顶点，其余所有顶点在路径中只出现一次。这里排除了包括像v->v这样的自循环的边和在两个顶点之间的多条边的情况。本算法沿用Tiernan算法的记号，每个简单环都是由根顶点为s的子图构建的，这个子图由s和“大于”s的顶点构成。因此每个输出都根据路径的最小点s来分类。\n\n当从s开始遍历路径，把一个顶点v加入这个路径时，会把这个顶点的状态设为“阻塞”（blocked），直到从v到s的所有路径都完成检索，v会一直保持这种状态，这样保证了一个顶点不会被重复添加。另外除非一个顶点是构造简单环路径的最小的点，这个点不会成为路径的根顶点。这样保证不会无意义的搜索。\n\n算法的输入是一个图结构，图的表示是邻接表形式。假设每个顶点用从1到n的一个数字表示，图表示为AG，则AG(v)是一个数组表示第v个顶点的邻接顶点。算法的过程是这样的：从一个根顶点s开始构建简单环，所经过的路径的顶点保存在一个栈中。算法通过调用CIRCUIT过程添加新顶点，添加时务必将其设置为blocked，并且在过程调用返回时删除这个顶点，但是此时不一定将其阻塞状态去除。\n\n# 代码解析\n下面是算法的伪代码：\n![](/images/johnson_pseudo_code.png)\n\n如上所述，整个算法包括CIRCUIT主过程， 位于empty stack;语句以上，它又包含一个子过程UNBLOCK用于对一个blocked顶点进行解锁。下面以C++为例谈一下我对这个算法实现的理解：\n\n每个点的ID表示为1到n的一个类型为size_t整数。Ak，B两个数组在开始时被初始化，数组的长度都为n，即顶点数目。这两个数组的元素都是list<size_t>，A数组第i个元素的链表记录从点i出发指向的顶点，即图的邻接表。B的作用是记录因为此点阻塞而被迫阻塞的顶点，一旦点i因为调用unblock过程解锁，那么在B[i]链表中记录的顶点也因此解锁。B的效果是将每个点尽可能的保持阻塞状态以防止重复搜索。blocked是一个长度为n的bool数组，表示在搜索时这个点是否是阻塞。s表示目前搜索到的根结点的编号。\n\nCIRCUIT过程从stack v;语句开始，其输入参数v表示这个CIRCUIT过程所搜索的环都是从v这个顶点开始的。调用开始先将标志量f设为false，f表示这次调用是否发现了一个环。把v放在栈stack中，然后将blocked数组的v设为true，即将此点阻塞。可以看到下方对于CIRCUIT的调用都是将s作为参数，所以stack的栈底一般都是s。下一步遍历Ak中第v个链表，即v出发的边指向的顶点。如果某个顶点与s相等，说明找到了一个环，这时执行输出环并把f设为true。否则如果这个顶点没有阻塞，说明还可以向下走，就递归调用此过程。\n\n如果能够在v的邻接顶点中找到一条环路，则f就是true的，这时可以把v解锁，即调用unblock过程。反之，则说明从包含从v出发的边的路径都是死路，是不可能的形成环的，所以不能解锁v，同时要把与v邻接的顶点置于B数组的第v个链表中，经过v的路径是死路，但经过v的邻接顶点w的不一定死路，应为w可能有另外的上级顶点，所以如果不搜索v了，即解锁v顶点是要把B[v]中记录的顶点也解锁，以供其他路径搜索使用。\n\n对v的调用结束时把v出栈。返回f，标志在这次调用中是否发现环。\n\n下面是如何执行主进程。主进程涉及到寻找强连通分量(scc)，这部分可以参考tarjan算法。算法首先清空储存路径节点的栈，将搜寻起点s设为1，注意所有顶点编号从1开始。Ak初始化为在{s, s+1, s+2,...,n}这些顶点构成的子图里面所有强连通分量中，有最小顶点的分量的邻接表。Ak如果为空，说明图已经搜索完，算法结束。否则将s设为上述分量Ak里面最小的顶点，将blocked全置为false，B清空，以s为输入参数调用CIRCUIT。注意此时CIRCUIT只寻找以s开头的环路。调用完成将s加一，再在新的子图中寻找。\n\n## 实例解析\n\n下面是对上述过程的一个实例，来自YouTube一位Tushar Roy的视频主的教程（此君在YouTube上多有图论方面教程，可以学习，这个算法的视频我搬运到了B站，供诸君参考）。\n![](/images/johnson_step_1.png)\nStep1是一个有向图G，Step2表示分解后的三个强连通分量，所谓强连通分量，就是在一个有向图中，任选两个顶点都可以互相到达。分解scc的tarjan算法在此不再赘述。\n![](/images/johnson_step_2.png)\n发现1是最小的顶点，选取1所在的scc开始搜索，第一个调用顶点是1。step3-5是从1开始的3条遍历路径。上图所示，红色边表示搜索的路径，从1开始依次搜索1，2，3，到3的时候，栈里存储了这三个节点，并且blocked数组将这三个元素设为true。3有3个邻接顶点。首先搜索1，发现1是出发的顶点，表明找到了一个环，就将环输出，并把3这里调用的变量f设为true。\n![](/images/johnson_step_3.png)\n回到顶点3后搜索下一个邻接顶点4，4没有阻塞说明还没有探索过，4只有一个邻接点5，走到5之后已经无路可走，因为5的唯一邻接顶点2处于blocked状态，所以以f为false返回这次调用，表明没有找到环。调用从2返回到5的时候看到返回值是false，这时把5放到B[2]的链表中。这种做法相当于告诉2节点：兄弟你解锁的时候把我也解锁了，你不解锁我也堵着算了，反正下次再找到我的时候，我的下家都是死路，找也是白找。所以，只有在调用UNBLOCK(2)的时候5才能解锁，这时blocked[5]还是保持blocked状态。返回的4的时候也是如此。需要把4保持阻塞，并把4放到B[5]的链表中。这时调用返回到了3节点。\n![](/images/johnson_step_4.png)\n检索3的下一个邻居6，发现6的下家4还是阻塞的，于是这次调用也以失败返回。返回到3，3的邻居已经检索完，发现了一个环，所以f是true的，把3的阻塞解除，调用返回到2。因为3找到了一个环所以2的f也是true的，所以调用UNBLOCK(2)，这个过程把blocked[2]设为false之后，检索B[2]发现里面有一个元素5，因此递归调用把5也解锁了。依次调用，B就被清空了。\n\n这就是一次1->2这个边开头的检索的完整过程。\n\n# 引用\n[1] Donald B. Johnson, Finding all the elementary circuits of a directed graph, SIAM Journal on Computing, 1975.\n\n[2] BiliBili搬运视频：https://www.bilibili.com/video/BV13Q4y1K7bx\n\n[3] 一个Github的C++实现：https://github.com/hellogcc/circuit-finding-algorithm（其实现无论方式还是算法都有不少和原算法的出入，大家批判性鉴赏。\n","source":"_posts/Find-all-simple-circles-in-directed-graph-Johnson-Algorithm.md","raw":"---\ntitle: Find all simple circles in a directed graph - Johnson Algorithm\ndate: 2023-02-19 01:25:19\ntags: algorithm\n---\n\n# 综述\nJohnson算法由B. Johnson发表于1975年，用于在一个有向图中寻找所有简单环。时间复杂度上界为O((n+e)(c+1))，空间复杂度为O(n+e)，其中n为顶点数，e为边数，c为存在环数。在算法执行时，每两个连续的环的输出之间的时间不会超过O(n+e)。\n\n*常用的此类算法的复杂度比较如下：*\n- Tiernan - O(V.const^V)\n- Tarjan - O(VEC)\n- Johnson - O(((V+E)C)\n- Szwarcfiter and Lauer - O(V+EC)\n\n所谓的简单环，即除了第一个和最后一个顶点，其余所有顶点在路径中只出现一次。这里排除了包括像v->v这样的自循环的边和在两个顶点之间的多条边的情况。本算法沿用Tiernan算法的记号，每个简单环都是由根顶点为s的子图构建的，这个子图由s和“大于”s的顶点构成。因此每个输出都根据路径的最小点s来分类。\n\n当从s开始遍历路径，把一个顶点v加入这个路径时，会把这个顶点的状态设为“阻塞”（blocked），直到从v到s的所有路径都完成检索，v会一直保持这种状态，这样保证了一个顶点不会被重复添加。另外除非一个顶点是构造简单环路径的最小的点，这个点不会成为路径的根顶点。这样保证不会无意义的搜索。\n\n算法的输入是一个图结构，图的表示是邻接表形式。假设每个顶点用从1到n的一个数字表示，图表示为AG，则AG(v)是一个数组表示第v个顶点的邻接顶点。算法的过程是这样的：从一个根顶点s开始构建简单环，所经过的路径的顶点保存在一个栈中。算法通过调用CIRCUIT过程添加新顶点，添加时务必将其设置为blocked，并且在过程调用返回时删除这个顶点，但是此时不一定将其阻塞状态去除。\n\n# 代码解析\n下面是算法的伪代码：\n![](/images/johnson_pseudo_code.png)\n\n如上所述，整个算法包括CIRCUIT主过程， 位于empty stack;语句以上，它又包含一个子过程UNBLOCK用于对一个blocked顶点进行解锁。下面以C++为例谈一下我对这个算法实现的理解：\n\n每个点的ID表示为1到n的一个类型为size_t整数。Ak，B两个数组在开始时被初始化，数组的长度都为n，即顶点数目。这两个数组的元素都是list<size_t>，A数组第i个元素的链表记录从点i出发指向的顶点，即图的邻接表。B的作用是记录因为此点阻塞而被迫阻塞的顶点，一旦点i因为调用unblock过程解锁，那么在B[i]链表中记录的顶点也因此解锁。B的效果是将每个点尽可能的保持阻塞状态以防止重复搜索。blocked是一个长度为n的bool数组，表示在搜索时这个点是否是阻塞。s表示目前搜索到的根结点的编号。\n\nCIRCUIT过程从stack v;语句开始，其输入参数v表示这个CIRCUIT过程所搜索的环都是从v这个顶点开始的。调用开始先将标志量f设为false，f表示这次调用是否发现了一个环。把v放在栈stack中，然后将blocked数组的v设为true，即将此点阻塞。可以看到下方对于CIRCUIT的调用都是将s作为参数，所以stack的栈底一般都是s。下一步遍历Ak中第v个链表，即v出发的边指向的顶点。如果某个顶点与s相等，说明找到了一个环，这时执行输出环并把f设为true。否则如果这个顶点没有阻塞，说明还可以向下走，就递归调用此过程。\n\n如果能够在v的邻接顶点中找到一条环路，则f就是true的，这时可以把v解锁，即调用unblock过程。反之，则说明从包含从v出发的边的路径都是死路，是不可能的形成环的，所以不能解锁v，同时要把与v邻接的顶点置于B数组的第v个链表中，经过v的路径是死路，但经过v的邻接顶点w的不一定死路，应为w可能有另外的上级顶点，所以如果不搜索v了，即解锁v顶点是要把B[v]中记录的顶点也解锁，以供其他路径搜索使用。\n\n对v的调用结束时把v出栈。返回f，标志在这次调用中是否发现环。\n\n下面是如何执行主进程。主进程涉及到寻找强连通分量(scc)，这部分可以参考tarjan算法。算法首先清空储存路径节点的栈，将搜寻起点s设为1，注意所有顶点编号从1开始。Ak初始化为在{s, s+1, s+2,...,n}这些顶点构成的子图里面所有强连通分量中，有最小顶点的分量的邻接表。Ak如果为空，说明图已经搜索完，算法结束。否则将s设为上述分量Ak里面最小的顶点，将blocked全置为false，B清空，以s为输入参数调用CIRCUIT。注意此时CIRCUIT只寻找以s开头的环路。调用完成将s加一，再在新的子图中寻找。\n\n## 实例解析\n\n下面是对上述过程的一个实例，来自YouTube一位Tushar Roy的视频主的教程（此君在YouTube上多有图论方面教程，可以学习，这个算法的视频我搬运到了B站，供诸君参考）。\n![](/images/johnson_step_1.png)\nStep1是一个有向图G，Step2表示分解后的三个强连通分量，所谓强连通分量，就是在一个有向图中，任选两个顶点都可以互相到达。分解scc的tarjan算法在此不再赘述。\n![](/images/johnson_step_2.png)\n发现1是最小的顶点，选取1所在的scc开始搜索，第一个调用顶点是1。step3-5是从1开始的3条遍历路径。上图所示，红色边表示搜索的路径，从1开始依次搜索1，2，3，到3的时候，栈里存储了这三个节点，并且blocked数组将这三个元素设为true。3有3个邻接顶点。首先搜索1，发现1是出发的顶点，表明找到了一个环，就将环输出，并把3这里调用的变量f设为true。\n![](/images/johnson_step_3.png)\n回到顶点3后搜索下一个邻接顶点4，4没有阻塞说明还没有探索过，4只有一个邻接点5，走到5之后已经无路可走，因为5的唯一邻接顶点2处于blocked状态，所以以f为false返回这次调用，表明没有找到环。调用从2返回到5的时候看到返回值是false，这时把5放到B[2]的链表中。这种做法相当于告诉2节点：兄弟你解锁的时候把我也解锁了，你不解锁我也堵着算了，反正下次再找到我的时候，我的下家都是死路，找也是白找。所以，只有在调用UNBLOCK(2)的时候5才能解锁，这时blocked[5]还是保持blocked状态。返回的4的时候也是如此。需要把4保持阻塞，并把4放到B[5]的链表中。这时调用返回到了3节点。\n![](/images/johnson_step_4.png)\n检索3的下一个邻居6，发现6的下家4还是阻塞的，于是这次调用也以失败返回。返回到3，3的邻居已经检索完，发现了一个环，所以f是true的，把3的阻塞解除，调用返回到2。因为3找到了一个环所以2的f也是true的，所以调用UNBLOCK(2)，这个过程把blocked[2]设为false之后，检索B[2]发现里面有一个元素5，因此递归调用把5也解锁了。依次调用，B就被清空了。\n\n这就是一次1->2这个边开头的检索的完整过程。\n\n# 引用\n[1] Donald B. Johnson, Finding all the elementary circuits of a directed graph, SIAM Journal on Computing, 1975.\n\n[2] BiliBili搬运视频：https://www.bilibili.com/video/BV13Q4y1K7bx\n\n[3] 一个Github的C++实现：https://github.com/hellogcc/circuit-finding-algorithm（其实现无论方式还是算法都有不少和原算法的出入，大家批判性鉴赏。\n","slug":"Find-all-simple-circles-in-directed-graph-Johnson-Algorithm","published":1,"updated":"2023-02-19T05:23:58.986Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clebil42q0001dvn76flk6jd8","content":"<h1 id=\"综述\"><a href=\"#综述\" class=\"headerlink\" title=\"综述\"></a>综述</h1><p>Johnson算法由B. Johnson发表于1975年，用于在一个有向图中寻找所有简单环。时间复杂度上界为O((n+e)(c+1))，空间复杂度为O(n+e)，其中n为顶点数，e为边数，c为存在环数。在算法执行时，每两个连续的环的输出之间的时间不会超过O(n+e)。</p>\n<p><em>常用的此类算法的复杂度比较如下：</em></p>\n<ul>\n<li>Tiernan - O(V.const^V)</li>\n<li>Tarjan - O(VEC)</li>\n<li>Johnson - O(((V+E)C)</li>\n<li>Szwarcfiter and Lauer - O(V+EC)</li>\n</ul>\n<p>所谓的简单环，即除了第一个和最后一个顶点，其余所有顶点在路径中只出现一次。这里排除了包括像v-&gt;v这样的自循环的边和在两个顶点之间的多条边的情况。本算法沿用Tiernan算法的记号，每个简单环都是由根顶点为s的子图构建的，这个子图由s和“大于”s的顶点构成。因此每个输出都根据路径的最小点s来分类。</p>\n<p>当从s开始遍历路径，把一个顶点v加入这个路径时，会把这个顶点的状态设为“阻塞”（blocked），直到从v到s的所有路径都完成检索，v会一直保持这种状态，这样保证了一个顶点不会被重复添加。另外除非一个顶点是构造简单环路径的最小的点，这个点不会成为路径的根顶点。这样保证不会无意义的搜索。</p>\n<p>算法的输入是一个图结构，图的表示是邻接表形式。假设每个顶点用从1到n的一个数字表示，图表示为AG，则AG(v)是一个数组表示第v个顶点的邻接顶点。算法的过程是这样的：从一个根顶点s开始构建简单环，所经过的路径的顶点保存在一个栈中。算法通过调用CIRCUIT过程添加新顶点，添加时务必将其设置为blocked，并且在过程调用返回时删除这个顶点，但是此时不一定将其阻塞状态去除。</p>\n<h1 id=\"代码解析\"><a href=\"#代码解析\" class=\"headerlink\" title=\"代码解析\"></a>代码解析</h1><p>下面是算法的伪代码：<br><img src=\"/images/johnson_pseudo_code.png\"></p>\n<p>如上所述，整个算法包括CIRCUIT主过程， 位于empty stack;语句以上，它又包含一个子过程UNBLOCK用于对一个blocked顶点进行解锁。下面以C++为例谈一下我对这个算法实现的理解：</p>\n<p>每个点的ID表示为1到n的一个类型为size_t整数。Ak，B两个数组在开始时被初始化，数组的长度都为n，即顶点数目。这两个数组的元素都是list<size_t>，A数组第i个元素的链表记录从点i出发指向的顶点，即图的邻接表。B的作用是记录因为此点阻塞而被迫阻塞的顶点，一旦点i因为调用unblock过程解锁，那么在B[i]链表中记录的顶点也因此解锁。B的效果是将每个点尽可能的保持阻塞状态以防止重复搜索。blocked是一个长度为n的bool数组，表示在搜索时这个点是否是阻塞。s表示目前搜索到的根结点的编号。</p>\n<p>CIRCUIT过程从stack v;语句开始，其输入参数v表示这个CIRCUIT过程所搜索的环都是从v这个顶点开始的。调用开始先将标志量f设为false，f表示这次调用是否发现了一个环。把v放在栈stack中，然后将blocked数组的v设为true，即将此点阻塞。可以看到下方对于CIRCUIT的调用都是将s作为参数，所以stack的栈底一般都是s。下一步遍历Ak中第v个链表，即v出发的边指向的顶点。如果某个顶点与s相等，说明找到了一个环，这时执行输出环并把f设为true。否则如果这个顶点没有阻塞，说明还可以向下走，就递归调用此过程。</p>\n<p>如果能够在v的邻接顶点中找到一条环路，则f就是true的，这时可以把v解锁，即调用unblock过程。反之，则说明从包含从v出发的边的路径都是死路，是不可能的形成环的，所以不能解锁v，同时要把与v邻接的顶点置于B数组的第v个链表中，经过v的路径是死路，但经过v的邻接顶点w的不一定死路，应为w可能有另外的上级顶点，所以如果不搜索v了，即解锁v顶点是要把B[v]中记录的顶点也解锁，以供其他路径搜索使用。</p>\n<p>对v的调用结束时把v出栈。返回f，标志在这次调用中是否发现环。</p>\n<p>下面是如何执行主进程。主进程涉及到寻找强连通分量(scc)，这部分可以参考tarjan算法。算法首先清空储存路径节点的栈，将搜寻起点s设为1，注意所有顶点编号从1开始。Ak初始化为在{s, s+1, s+2,…,n}这些顶点构成的子图里面所有强连通分量中，有最小顶点的分量的邻接表。Ak如果为空，说明图已经搜索完，算法结束。否则将s设为上述分量Ak里面最小的顶点，将blocked全置为false，B清空，以s为输入参数调用CIRCUIT。注意此时CIRCUIT只寻找以s开头的环路。调用完成将s加一，再在新的子图中寻找。</p>\n<h2 id=\"实例解析\"><a href=\"#实例解析\" class=\"headerlink\" title=\"实例解析\"></a>实例解析</h2><p>下面是对上述过程的一个实例，来自YouTube一位Tushar Roy的视频主的教程（此君在YouTube上多有图论方面教程，可以学习，这个算法的视频我搬运到了B站，供诸君参考）。<br><img src=\"/images/johnson_step_1.png\"><br>Step1是一个有向图G，Step2表示分解后的三个强连通分量，所谓强连通分量，就是在一个有向图中，任选两个顶点都可以互相到达。分解scc的tarjan算法在此不再赘述。<br><img src=\"/images/johnson_step_2.png\"><br>发现1是最小的顶点，选取1所在的scc开始搜索，第一个调用顶点是1。step3-5是从1开始的3条遍历路径。上图所示，红色边表示搜索的路径，从1开始依次搜索1，2，3，到3的时候，栈里存储了这三个节点，并且blocked数组将这三个元素设为true。3有3个邻接顶点。首先搜索1，发现1是出发的顶点，表明找到了一个环，就将环输出，并把3这里调用的变量f设为true。<br><img src=\"/images/johnson_step_3.png\"><br>回到顶点3后搜索下一个邻接顶点4，4没有阻塞说明还没有探索过，4只有一个邻接点5，走到5之后已经无路可走，因为5的唯一邻接顶点2处于blocked状态，所以以f为false返回这次调用，表明没有找到环。调用从2返回到5的时候看到返回值是false，这时把5放到B[2]的链表中。这种做法相当于告诉2节点：兄弟你解锁的时候把我也解锁了，你不解锁我也堵着算了，反正下次再找到我的时候，我的下家都是死路，找也是白找。所以，只有在调用UNBLOCK(2)的时候5才能解锁，这时blocked[5]还是保持blocked状态。返回的4的时候也是如此。需要把4保持阻塞，并把4放到B[5]的链表中。这时调用返回到了3节点。<br><img src=\"/images/johnson_step_4.png\"><br>检索3的下一个邻居6，发现6的下家4还是阻塞的，于是这次调用也以失败返回。返回到3，3的邻居已经检索完，发现了一个环，所以f是true的，把3的阻塞解除，调用返回到2。因为3找到了一个环所以2的f也是true的，所以调用UNBLOCK(2)，这个过程把blocked[2]设为false之后，检索B[2]发现里面有一个元素5，因此递归调用把5也解锁了。依次调用，B就被清空了。</p>\n<p>这就是一次1-&gt;2这个边开头的检索的完整过程。</p>\n<h1 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h1><p>[1] Donald B. Johnson, Finding all the elementary circuits of a directed graph, SIAM Journal on Computing, 1975.</p>\n<p>[2] BiliBili搬运视频：<a href=\"https://www.bilibili.com/video/BV13Q4y1K7bx\">https://www.bilibili.com/video/BV13Q4y1K7bx</a></p>\n<p>[3] 一个Github的C++实现：<a href=\"https://github.com/hellogcc/circuit-finding-algorithm%EF%BC%88%E5%85%B6%E5%AE%9E%E7%8E%B0%E6%97%A0%E8%AE%BA%E6%96%B9%E5%BC%8F%E8%BF%98%E6%98%AF%E7%AE%97%E6%B3%95%E9%83%BD%E6%9C%89%E4%B8%8D%E5%B0%91%E5%92%8C%E5%8E%9F%E7%AE%97%E6%B3%95%E7%9A%84%E5%87%BA%E5%85%A5%EF%BC%8C%E5%A4%A7%E5%AE%B6%E6%89%B9%E5%88%A4%E6%80%A7%E9%89%B4%E8%B5%8F%E3%80%82\">https://github.com/hellogcc/circuit-finding-algorithm（其实现无论方式还是算法都有不少和原算法的出入，大家批判性鉴赏。</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"综述\"><a href=\"#综述\" class=\"headerlink\" title=\"综述\"></a>综述</h1><p>Johnson算法由B. Johnson发表于1975年，用于在一个有向图中寻找所有简单环。时间复杂度上界为O((n+e)(c+1))，空间复杂度为O(n+e)，其中n为顶点数，e为边数，c为存在环数。在算法执行时，每两个连续的环的输出之间的时间不会超过O(n+e)。</p>\n<p><em>常用的此类算法的复杂度比较如下：</em></p>\n<ul>\n<li>Tiernan - O(V.const^V)</li>\n<li>Tarjan - O(VEC)</li>\n<li>Johnson - O(((V+E)C)</li>\n<li>Szwarcfiter and Lauer - O(V+EC)</li>\n</ul>\n<p>所谓的简单环，即除了第一个和最后一个顶点，其余所有顶点在路径中只出现一次。这里排除了包括像v-&gt;v这样的自循环的边和在两个顶点之间的多条边的情况。本算法沿用Tiernan算法的记号，每个简单环都是由根顶点为s的子图构建的，这个子图由s和“大于”s的顶点构成。因此每个输出都根据路径的最小点s来分类。</p>\n<p>当从s开始遍历路径，把一个顶点v加入这个路径时，会把这个顶点的状态设为“阻塞”（blocked），直到从v到s的所有路径都完成检索，v会一直保持这种状态，这样保证了一个顶点不会被重复添加。另外除非一个顶点是构造简单环路径的最小的点，这个点不会成为路径的根顶点。这样保证不会无意义的搜索。</p>\n<p>算法的输入是一个图结构，图的表示是邻接表形式。假设每个顶点用从1到n的一个数字表示，图表示为AG，则AG(v)是一个数组表示第v个顶点的邻接顶点。算法的过程是这样的：从一个根顶点s开始构建简单环，所经过的路径的顶点保存在一个栈中。算法通过调用CIRCUIT过程添加新顶点，添加时务必将其设置为blocked，并且在过程调用返回时删除这个顶点，但是此时不一定将其阻塞状态去除。</p>\n<h1 id=\"代码解析\"><a href=\"#代码解析\" class=\"headerlink\" title=\"代码解析\"></a>代码解析</h1><p>下面是算法的伪代码：<br><img src=\"/images/johnson_pseudo_code.png\"></p>\n<p>如上所述，整个算法包括CIRCUIT主过程， 位于empty stack;语句以上，它又包含一个子过程UNBLOCK用于对一个blocked顶点进行解锁。下面以C++为例谈一下我对这个算法实现的理解：</p>\n<p>每个点的ID表示为1到n的一个类型为size_t整数。Ak，B两个数组在开始时被初始化，数组的长度都为n，即顶点数目。这两个数组的元素都是list<size_t>，A数组第i个元素的链表记录从点i出发指向的顶点，即图的邻接表。B的作用是记录因为此点阻塞而被迫阻塞的顶点，一旦点i因为调用unblock过程解锁，那么在B[i]链表中记录的顶点也因此解锁。B的效果是将每个点尽可能的保持阻塞状态以防止重复搜索。blocked是一个长度为n的bool数组，表示在搜索时这个点是否是阻塞。s表示目前搜索到的根结点的编号。</p>\n<p>CIRCUIT过程从stack v;语句开始，其输入参数v表示这个CIRCUIT过程所搜索的环都是从v这个顶点开始的。调用开始先将标志量f设为false，f表示这次调用是否发现了一个环。把v放在栈stack中，然后将blocked数组的v设为true，即将此点阻塞。可以看到下方对于CIRCUIT的调用都是将s作为参数，所以stack的栈底一般都是s。下一步遍历Ak中第v个链表，即v出发的边指向的顶点。如果某个顶点与s相等，说明找到了一个环，这时执行输出环并把f设为true。否则如果这个顶点没有阻塞，说明还可以向下走，就递归调用此过程。</p>\n<p>如果能够在v的邻接顶点中找到一条环路，则f就是true的，这时可以把v解锁，即调用unblock过程。反之，则说明从包含从v出发的边的路径都是死路，是不可能的形成环的，所以不能解锁v，同时要把与v邻接的顶点置于B数组的第v个链表中，经过v的路径是死路，但经过v的邻接顶点w的不一定死路，应为w可能有另外的上级顶点，所以如果不搜索v了，即解锁v顶点是要把B[v]中记录的顶点也解锁，以供其他路径搜索使用。</p>\n<p>对v的调用结束时把v出栈。返回f，标志在这次调用中是否发现环。</p>\n<p>下面是如何执行主进程。主进程涉及到寻找强连通分量(scc)，这部分可以参考tarjan算法。算法首先清空储存路径节点的栈，将搜寻起点s设为1，注意所有顶点编号从1开始。Ak初始化为在{s, s+1, s+2,…,n}这些顶点构成的子图里面所有强连通分量中，有最小顶点的分量的邻接表。Ak如果为空，说明图已经搜索完，算法结束。否则将s设为上述分量Ak里面最小的顶点，将blocked全置为false，B清空，以s为输入参数调用CIRCUIT。注意此时CIRCUIT只寻找以s开头的环路。调用完成将s加一，再在新的子图中寻找。</p>\n<h2 id=\"实例解析\"><a href=\"#实例解析\" class=\"headerlink\" title=\"实例解析\"></a>实例解析</h2><p>下面是对上述过程的一个实例，来自YouTube一位Tushar Roy的视频主的教程（此君在YouTube上多有图论方面教程，可以学习，这个算法的视频我搬运到了B站，供诸君参考）。<br><img src=\"/images/johnson_step_1.png\"><br>Step1是一个有向图G，Step2表示分解后的三个强连通分量，所谓强连通分量，就是在一个有向图中，任选两个顶点都可以互相到达。分解scc的tarjan算法在此不再赘述。<br><img src=\"/images/johnson_step_2.png\"><br>发现1是最小的顶点，选取1所在的scc开始搜索，第一个调用顶点是1。step3-5是从1开始的3条遍历路径。上图所示，红色边表示搜索的路径，从1开始依次搜索1，2，3，到3的时候，栈里存储了这三个节点，并且blocked数组将这三个元素设为true。3有3个邻接顶点。首先搜索1，发现1是出发的顶点，表明找到了一个环，就将环输出，并把3这里调用的变量f设为true。<br><img src=\"/images/johnson_step_3.png\"><br>回到顶点3后搜索下一个邻接顶点4，4没有阻塞说明还没有探索过，4只有一个邻接点5，走到5之后已经无路可走，因为5的唯一邻接顶点2处于blocked状态，所以以f为false返回这次调用，表明没有找到环。调用从2返回到5的时候看到返回值是false，这时把5放到B[2]的链表中。这种做法相当于告诉2节点：兄弟你解锁的时候把我也解锁了，你不解锁我也堵着算了，反正下次再找到我的时候，我的下家都是死路，找也是白找。所以，只有在调用UNBLOCK(2)的时候5才能解锁，这时blocked[5]还是保持blocked状态。返回的4的时候也是如此。需要把4保持阻塞，并把4放到B[5]的链表中。这时调用返回到了3节点。<br><img src=\"/images/johnson_step_4.png\"><br>检索3的下一个邻居6，发现6的下家4还是阻塞的，于是这次调用也以失败返回。返回到3，3的邻居已经检索完，发现了一个环，所以f是true的，把3的阻塞解除，调用返回到2。因为3找到了一个环所以2的f也是true的，所以调用UNBLOCK(2)，这个过程把blocked[2]设为false之后，检索B[2]发现里面有一个元素5，因此递归调用把5也解锁了。依次调用，B就被清空了。</p>\n<p>这就是一次1-&gt;2这个边开头的检索的完整过程。</p>\n<h1 id=\"引用\"><a href=\"#引用\" class=\"headerlink\" title=\"引用\"></a>引用</h1><p>[1] Donald B. Johnson, Finding all the elementary circuits of a directed graph, SIAM Journal on Computing, 1975.</p>\n<p>[2] BiliBili搬运视频：<a href=\"https://www.bilibili.com/video/BV13Q4y1K7bx\">https://www.bilibili.com/video/BV13Q4y1K7bx</a></p>\n<p>[3] 一个Github的C++实现：<a href=\"https://github.com/hellogcc/circuit-finding-algorithm%EF%BC%88%E5%85%B6%E5%AE%9E%E7%8E%B0%E6%97%A0%E8%AE%BA%E6%96%B9%E5%BC%8F%E8%BF%98%E6%98%AF%E7%AE%97%E6%B3%95%E9%83%BD%E6%9C%89%E4%B8%8D%E5%B0%91%E5%92%8C%E5%8E%9F%E7%AE%97%E6%B3%95%E7%9A%84%E5%87%BA%E5%85%A5%EF%BC%8C%E5%A4%A7%E5%AE%B6%E6%89%B9%E5%88%A4%E6%80%A7%E9%89%B4%E8%B5%8F%E3%80%82\">https://github.com/hellogcc/circuit-finding-algorithm（其实现无论方式还是算法都有不少和原算法的出入，大家批判性鉴赏。</a></p>\n"},{"title":"Introduction to std::any in c++","date":"2022-12-04T10:08:01.000Z","_content":"\n# What Is `std::any`\n\n`std::any` is a new feature that comes with C++ 17 standard. It's kind of `void*` with type-safety, supporting copy/move/store/get, etc. Some basic usages of it can be found here: [std::any - cppreference](https://en.cppreference.com/w/cpp/utility/any)\n\nUnderstanding how `std::any` is implemented can be gainful, for it taking advantage of many c++ skills, especially templates.\n\n# Implementation of `std::any`\n\nThe source code referred to below is <any> of llvm's libcxx library, revision: [any - libcxx](https://github.com/llvm/llvm-project/blob/eb7d16ea25649909373e324e6ebf36774cabdbfa/libcxx/include/any).\n\n## Class Layout\n\n`std::any` has two data members:\n\n1. `__h_: _HandleFunPtr`, it's a function pointer that points to a static function, as well as the entry of data manipulation including constructing/destroying/copying/access, etc. Prototype of the function is:\n\n   ```cpp\n   /*******\n   * arg1: Enum, kind of the manipulation, (_Destroy, _Copy, _Move, _Get, _TypeInfo)\n   * arg2: Caller's \"this\" pointer\n   * arg3: Destination any, used in copy, move\n   * arg4: Runtime type info, always nullptr if rtti is disabled\n   * arg5: Fallback type info, described in next chapter\n   *******/\n   using _HandleFuncPtr =  void* (*)(_Action, any const *, any *, const type_info *,\n                                           const void* __fallback_info);\n   ```\n\n2. `__s_: _Storage`, stores pointer to managing data. It's declared as a union for separately handling large and small objects.\n\nIn conclusion, `std::any` is basically equal to an aggregate of a data block and a predefined manipulation function, which proves the famous saying **Algorithms + Data Structures = Programs** to some extent.\n\n\n\n## Skills of Implementation\n\n### Small objects optimization\n\n> Implementations are encouraged to avoid dynamic allocations for small objects.    -- cpp refrence\n\nThe data pointer `__s_` is not a `void*` but privately declared as a such union:\n\n```cpp\nusing _Buffer = aligned_storage_t<3*sizeof(void*), alignment_of<void*>::value>;\nunion _Storage {\n    constexpr _Storage() : __ptr(nullptr) {}\n    void *  __ptr;\n    __any_imp::_Buffer __buf;\n};\n```\n\nIn a 64-bit machine, `_Storage` occupies 24 bytes. `__buf` is equally a `void*`, used when the contained object is no larger than 24 bytes. Utilizing the benefits of stack memory, constructing or copying these small objects could be more effective. Larger objects, on the other hand, have to be stored on heap memory and allocated dynamically in runtime.\n\n\"24 bytes\" is a curated threshold that is exactly the size of `std::vector` /`std::string` and many other STL containers in libcxx. This fact means `std::any` can manage these common objects faster, though the memory inside them could still be dynamic.\n\nA similar memory optimization technology is also applied on `std::string`, but subtler. I will introduce it in the future.\n\n\n\n### In-place Construct\n\nWhen a `std::any` object is copied, the object managed by it is also copied. It's pretty straight yet important, simply `memcpy` is not enough because some classes have essential things to do, such as `std::shared_ptr`. `std::any`s copy object with its own copy constructor through allocator. It also applies to move construction.\n\nBut what about the constructor itself? Like `emplace_back` for `std::vector`, `std::any` also has an emplace-like constructor, in which the object is directly constructed on `__buf` instead of constructing a temporary object and then moving it.\n\n```cpp\nstd::any a(std::in_place_type<std::string>, \"hello\");\nstd::any b(\"hello\");\n```\n\nBy inspecting these 2 variables in a debugger, we can acknowledge that `std::in_place_type<std::string>` has two folder meanings, it tells `std::any` constructing a `std::string` instead of a `const char*` and constructing it directly.\n\n\n\n### Type to int mapping\n\nObviously, `std::any` is not a template class itself, but it can throw exceptions when casting it to a different static type even if RTTI(run-time type info) is disabled. The secret of this type-safety is a mapping from type to an integer.\n\nOn line 162 of `any.h`, a type-unique template struct is defined as:\n\n```cpp\ntemplate <class _Tp>\nstruct __unique_typeinfo { \n    static constexpr int __id = 0; \n};\n\n// get type id if rtti is disabled\ntemplate <class _Tp>\ninline constexpr const void* __get_fallback_typeid() {\n    return &__unique_typeinfo<remove_cv_t<remove_reference_t<_Tp>>>::__id;\n}\n```\n\nThe static member `__id` of `__unique_typeinfo` is always equal to 0 but is a unique instance corresponding to type `__Tp` due to template specialization. Based on this, `std::any` gets the address of `__id` as a fallback type id if RTTI is disabled (compiling with flag `-fno-rtti`).\n\n\n\n# Best Practices\n\nIn conclusion, the best practices of `std::any` include:\n\n- To avoid unnecessary copying, use `std::make_any` or `std::in_place_type` to construct.\n- Pass `std::any` by reference if possible.\n- Use pointer version `std::any_cast<T>(&a)` to avoid copying large objects.\n- Let custom objects conform to [the rule of three/five/zero](https://en.cppreference.com/w/cpp/language/rule_of_three) if managed by `std::any`.\n\n\n\n# Formatting of `std::any` in LLDB\n\nBoth belonging to Project LLVM, LLDB does not provide a formatted display of `std::any` of libcxx (while GDB does with libstdc++). Printing `std::any` in LLDB CLI will get:\n\n```Shell\n(lldb) n\nProcess 76235 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = step over\n    frame #0: 0x0000000100003a3c Play`main at main.cpp:17:5\n   14          int main() {\n   15              std::any a = 1;\n-> 16              return 0;\n   17          }\n(lldb) fr v a\n(std::any) $0 = {\n  __h = 0x0000000100003d2c (Play`std::__1::__any_imp::_SmallHandler<int>::__handle(std::__1::__any_imp::_Action, std::__1::any const*, std::__1::any*, std::type_info const*, void const*) at any:350)\n  __s = {\n    __ptr = 0x0000000000000001\n    __buf = (__lx = \"\\U00000001\\0\\0\\0\\0\\0\\0\\0\\U00000001\\0\\xc1\\x89FͽV\\0:\\0\\0\\U00000001\")\n  }\n}\n```\n\nIt takes seconds to understand \"a\" is an int (from _SmallHandler's type) and its value is 0x1 (from first 4 bytes of `__buf`). I write a Python script as a plugin based on LLDB API to print it more intuitively. \n\n<script src=\"https://gist.github.com/TsaiHao/a0abaaa7272c917d5fc00e2bdc676969.js\"></script>\n\n## Implementation of plugin\n\nThere are 2 functions inside this script. `__lldb_init_module` is the entry of this plugin. `handle_std_any` is the processing handle used by LLDB.\n\nA tricky skill is catching the type name inside `_SmallHandler` using regex. After knowing that, we can find the object representing this type in python and then forcibly convert the pointer of buffer to it. This script should work for integers, floats, and `std::string`, but not very robust now. I will continually polish it.\n\n> The same type-catching trick can also be employed in c++ source code. `__PRETTY_FUNCTION__` macro carries type name of a template function, so you can do some static reflections with it. A famous example is [Magic Enum](https://github.com/Neargye/magic_enum).\n\nAnother noticeable thing is that public classes of libcxx need special treatment because they have an inline namespace `__1`.","source":"_posts/implementation_of_libcxx_any.md","raw":"---\ntitle: Introduction to std::any in c++\ndate: 2022-12-04 18:08:01\ncategories: blog\ntags: \n- c++ \n- libc++\n---\n\n# What Is `std::any`\n\n`std::any` is a new feature that comes with C++ 17 standard. It's kind of `void*` with type-safety, supporting copy/move/store/get, etc. Some basic usages of it can be found here: [std::any - cppreference](https://en.cppreference.com/w/cpp/utility/any)\n\nUnderstanding how `std::any` is implemented can be gainful, for it taking advantage of many c++ skills, especially templates.\n\n# Implementation of `std::any`\n\nThe source code referred to below is <any> of llvm's libcxx library, revision: [any - libcxx](https://github.com/llvm/llvm-project/blob/eb7d16ea25649909373e324e6ebf36774cabdbfa/libcxx/include/any).\n\n## Class Layout\n\n`std::any` has two data members:\n\n1. `__h_: _HandleFunPtr`, it's a function pointer that points to a static function, as well as the entry of data manipulation including constructing/destroying/copying/access, etc. Prototype of the function is:\n\n   ```cpp\n   /*******\n   * arg1: Enum, kind of the manipulation, (_Destroy, _Copy, _Move, _Get, _TypeInfo)\n   * arg2: Caller's \"this\" pointer\n   * arg3: Destination any, used in copy, move\n   * arg4: Runtime type info, always nullptr if rtti is disabled\n   * arg5: Fallback type info, described in next chapter\n   *******/\n   using _HandleFuncPtr =  void* (*)(_Action, any const *, any *, const type_info *,\n                                           const void* __fallback_info);\n   ```\n\n2. `__s_: _Storage`, stores pointer to managing data. It's declared as a union for separately handling large and small objects.\n\nIn conclusion, `std::any` is basically equal to an aggregate of a data block and a predefined manipulation function, which proves the famous saying **Algorithms + Data Structures = Programs** to some extent.\n\n\n\n## Skills of Implementation\n\n### Small objects optimization\n\n> Implementations are encouraged to avoid dynamic allocations for small objects.    -- cpp refrence\n\nThe data pointer `__s_` is not a `void*` but privately declared as a such union:\n\n```cpp\nusing _Buffer = aligned_storage_t<3*sizeof(void*), alignment_of<void*>::value>;\nunion _Storage {\n    constexpr _Storage() : __ptr(nullptr) {}\n    void *  __ptr;\n    __any_imp::_Buffer __buf;\n};\n```\n\nIn a 64-bit machine, `_Storage` occupies 24 bytes. `__buf` is equally a `void*`, used when the contained object is no larger than 24 bytes. Utilizing the benefits of stack memory, constructing or copying these small objects could be more effective. Larger objects, on the other hand, have to be stored on heap memory and allocated dynamically in runtime.\n\n\"24 bytes\" is a curated threshold that is exactly the size of `std::vector` /`std::string` and many other STL containers in libcxx. This fact means `std::any` can manage these common objects faster, though the memory inside them could still be dynamic.\n\nA similar memory optimization technology is also applied on `std::string`, but subtler. I will introduce it in the future.\n\n\n\n### In-place Construct\n\nWhen a `std::any` object is copied, the object managed by it is also copied. It's pretty straight yet important, simply `memcpy` is not enough because some classes have essential things to do, such as `std::shared_ptr`. `std::any`s copy object with its own copy constructor through allocator. It also applies to move construction.\n\nBut what about the constructor itself? Like `emplace_back` for `std::vector`, `std::any` also has an emplace-like constructor, in which the object is directly constructed on `__buf` instead of constructing a temporary object and then moving it.\n\n```cpp\nstd::any a(std::in_place_type<std::string>, \"hello\");\nstd::any b(\"hello\");\n```\n\nBy inspecting these 2 variables in a debugger, we can acknowledge that `std::in_place_type<std::string>` has two folder meanings, it tells `std::any` constructing a `std::string` instead of a `const char*` and constructing it directly.\n\n\n\n### Type to int mapping\n\nObviously, `std::any` is not a template class itself, but it can throw exceptions when casting it to a different static type even if RTTI(run-time type info) is disabled. The secret of this type-safety is a mapping from type to an integer.\n\nOn line 162 of `any.h`, a type-unique template struct is defined as:\n\n```cpp\ntemplate <class _Tp>\nstruct __unique_typeinfo { \n    static constexpr int __id = 0; \n};\n\n// get type id if rtti is disabled\ntemplate <class _Tp>\ninline constexpr const void* __get_fallback_typeid() {\n    return &__unique_typeinfo<remove_cv_t<remove_reference_t<_Tp>>>::__id;\n}\n```\n\nThe static member `__id` of `__unique_typeinfo` is always equal to 0 but is a unique instance corresponding to type `__Tp` due to template specialization. Based on this, `std::any` gets the address of `__id` as a fallback type id if RTTI is disabled (compiling with flag `-fno-rtti`).\n\n\n\n# Best Practices\n\nIn conclusion, the best practices of `std::any` include:\n\n- To avoid unnecessary copying, use `std::make_any` or `std::in_place_type` to construct.\n- Pass `std::any` by reference if possible.\n- Use pointer version `std::any_cast<T>(&a)` to avoid copying large objects.\n- Let custom objects conform to [the rule of three/five/zero](https://en.cppreference.com/w/cpp/language/rule_of_three) if managed by `std::any`.\n\n\n\n# Formatting of `std::any` in LLDB\n\nBoth belonging to Project LLVM, LLDB does not provide a formatted display of `std::any` of libcxx (while GDB does with libstdc++). Printing `std::any` in LLDB CLI will get:\n\n```Shell\n(lldb) n\nProcess 76235 stopped\n* thread #1, queue = 'com.apple.main-thread', stop reason = step over\n    frame #0: 0x0000000100003a3c Play`main at main.cpp:17:5\n   14          int main() {\n   15              std::any a = 1;\n-> 16              return 0;\n   17          }\n(lldb) fr v a\n(std::any) $0 = {\n  __h = 0x0000000100003d2c (Play`std::__1::__any_imp::_SmallHandler<int>::__handle(std::__1::__any_imp::_Action, std::__1::any const*, std::__1::any*, std::type_info const*, void const*) at any:350)\n  __s = {\n    __ptr = 0x0000000000000001\n    __buf = (__lx = \"\\U00000001\\0\\0\\0\\0\\0\\0\\0\\U00000001\\0\\xc1\\x89FͽV\\0:\\0\\0\\U00000001\")\n  }\n}\n```\n\nIt takes seconds to understand \"a\" is an int (from _SmallHandler's type) and its value is 0x1 (from first 4 bytes of `__buf`). I write a Python script as a plugin based on LLDB API to print it more intuitively. \n\n<script src=\"https://gist.github.com/TsaiHao/a0abaaa7272c917d5fc00e2bdc676969.js\"></script>\n\n## Implementation of plugin\n\nThere are 2 functions inside this script. `__lldb_init_module` is the entry of this plugin. `handle_std_any` is the processing handle used by LLDB.\n\nA tricky skill is catching the type name inside `_SmallHandler` using regex. After knowing that, we can find the object representing this type in python and then forcibly convert the pointer of buffer to it. This script should work for integers, floats, and `std::string`, but not very robust now. I will continually polish it.\n\n> The same type-catching trick can also be employed in c++ source code. `__PRETTY_FUNCTION__` macro carries type name of a template function, so you can do some static reflections with it. A famous example is [Magic Enum](https://github.com/Neargye/magic_enum).\n\nAnother noticeable thing is that public classes of libcxx need special treatment because they have an inline namespace `__1`.","slug":"implementation_of_libcxx_any","published":1,"updated":"2023-02-18T17:22:55.011Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clebil42r0002dvn79n70gdub","content":"<h1 id=\"What-Is-std-any\"><a href=\"#What-Is-std-any\" class=\"headerlink\" title=\"What Is std::any\"></a>What Is <code>std::any</code></h1><p><code>std::any</code> is a new feature that comes with C++ 17 standard. It’s kind of <code>void*</code> with type-safety, supporting copy&#x2F;move&#x2F;store&#x2F;get, etc. Some basic usages of it can be found here: <a href=\"https://en.cppreference.com/w/cpp/utility/any\">std::any - cppreference</a></p>\n<p>Understanding how <code>std::any</code> is implemented can be gainful, for it taking advantage of many c++ skills, especially templates.</p>\n<h1 id=\"Implementation-of-std-any\"><a href=\"#Implementation-of-std-any\" class=\"headerlink\" title=\"Implementation of std::any\"></a>Implementation of <code>std::any</code></h1><p>The source code referred to below is <any> of llvm’s libcxx library, revision: <a href=\"https://github.com/llvm/llvm-project/blob/eb7d16ea25649909373e324e6ebf36774cabdbfa/libcxx/include/any\">any - libcxx</a>.</p>\n<h2 id=\"Class-Layout\"><a href=\"#Class-Layout\" class=\"headerlink\" title=\"Class Layout\"></a>Class Layout</h2><p><code>std::any</code> has two data members:</p>\n<ol>\n<li><p><code>__h_: _HandleFunPtr</code>, it’s a function pointer that points to a static function, as well as the entry of data manipulation including constructing&#x2F;destroying&#x2F;copying&#x2F;access, etc. Prototype of the function is:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*******</span></span><br><span class=\"line\"><span class=\"comment\">* arg1: Enum, kind of the manipulation, (_Destroy, _Copy, _Move, _Get, _TypeInfo)</span></span><br><span class=\"line\"><span class=\"comment\">* arg2: Caller&#x27;s &quot;this&quot; pointer</span></span><br><span class=\"line\"><span class=\"comment\">* arg3: Destination any, used in copy, move</span></span><br><span class=\"line\"><span class=\"comment\">* arg4: Runtime type info, always nullptr if rtti is disabled</span></span><br><span class=\"line\"><span class=\"comment\">* arg5: Fallback type info, described in next chapter</span></span><br><span class=\"line\"><span class=\"comment\">*******/</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> _HandleFuncPtr =  <span class=\"type\">void</span>* (*)(_Action, any <span class=\"type\">const</span> *, any *, <span class=\"type\">const</span> type_info *,</span><br><span class=\"line\">                                        <span class=\"type\">const</span> <span class=\"type\">void</span>* __fallback_info);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>__s_: _Storage</code>, stores pointer to managing data. It’s declared as a union for separately handling large and small objects.</p>\n</li>\n</ol>\n<p>In conclusion, <code>std::any</code> is basically equal to an aggregate of a data block and a predefined manipulation function, which proves the famous saying <strong>Algorithms + Data Structures &#x3D; Programs</strong> to some extent.</p>\n<h2 id=\"Skills-of-Implementation\"><a href=\"#Skills-of-Implementation\" class=\"headerlink\" title=\"Skills of Implementation\"></a>Skills of Implementation</h2><h3 id=\"Small-objects-optimization\"><a href=\"#Small-objects-optimization\" class=\"headerlink\" title=\"Small objects optimization\"></a>Small objects optimization</h3><blockquote>\n<p>Implementations are encouraged to avoid dynamic allocations for small objects.    – cpp refrence</p>\n</blockquote>\n<p>The data pointer <code>__s_</code> is not a <code>void*</code> but privately declared as a such union:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> _Buffer = <span class=\"type\">aligned_storage_t</span>&lt;<span class=\"number\">3</span>*<span class=\"built_in\">sizeof</span>(<span class=\"type\">void</span>*), alignment_of&lt;<span class=\"type\">void</span>*&gt;::value&gt;;</span><br><span class=\"line\"><span class=\"keyword\">union</span> <span class=\"title class_\">_Storage</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constexpr</span> _Storage() : __ptr(<span class=\"literal\">nullptr</span>) &#123;&#125;</span><br><span class=\"line\">    <span class=\"type\">void</span> *  __ptr;</span><br><span class=\"line\">    __any_imp::_Buffer __buf;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>In a 64-bit machine, <code>_Storage</code> occupies 24 bytes. <code>__buf</code> is equally a <code>void*</code>, used when the contained object is no larger than 24 bytes. Utilizing the benefits of stack memory, constructing or copying these small objects could be more effective. Larger objects, on the other hand, have to be stored on heap memory and allocated dynamically in runtime.</p>\n<p>“24 bytes” is a curated threshold that is exactly the size of <code>std::vector</code> &#x2F;<code>std::string</code> and many other STL containers in libcxx. This fact means <code>std::any</code> can manage these common objects faster, though the memory inside them could still be dynamic.</p>\n<p>A similar memory optimization technology is also applied on <code>std::string</code>, but subtler. I will introduce it in the future.</p>\n<h3 id=\"In-place-Construct\"><a href=\"#In-place-Construct\" class=\"headerlink\" title=\"In-place Construct\"></a>In-place Construct</h3><p>When a <code>std::any</code> object is copied, the object managed by it is also copied. It’s pretty straight yet important, simply <code>memcpy</code> is not enough because some classes have essential things to do, such as <code>std::shared_ptr</code>. <code>std::any</code>s copy object with its own copy constructor through allocator. It also applies to move construction.</p>\n<p>But what about the constructor itself? Like <code>emplace_back</code> for <code>std::vector</code>, <code>std::any</code> also has an emplace-like constructor, in which the object is directly constructed on <code>__buf</code> instead of constructing a temporary object and then moving it.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">std::any <span class=\"title\">a</span><span class=\"params\">(std::in_place_type&lt;std::string&gt;, <span class=\"string\">&quot;hello&quot;</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\">std::any <span class=\"title\">b</span><span class=\"params\">(<span class=\"string\">&quot;hello&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>By inspecting these 2 variables in a debugger, we can acknowledge that <code>std::in_place_type&lt;std::string&gt;</code> has two folder meanings, it tells <code>std::any</code> constructing a <code>std::string</code> instead of a <code>const char*</code> and constructing it directly.</p>\n<h3 id=\"Type-to-int-mapping\"><a href=\"#Type-to-int-mapping\" class=\"headerlink\" title=\"Type to int mapping\"></a>Type to int mapping</h3><p>Obviously, <code>std::any</code> is not a template class itself, but it can throw exceptions when casting it to a different static type even if RTTI(run-time type info) is disabled. The secret of this type-safety is a mapping from type to an integer.</p>\n<p>On line 162 of <code>any.h</code>, a type-unique template struct is defined as:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">class</span> <span class=\"title class_\">_Tp</span>&gt;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">__unique_typeinfo</span> &#123; </span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"keyword\">constexpr</span> <span class=\"type\">int</span> __id = <span class=\"number\">0</span>; </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get type id if rtti is disabled</span></span><br><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">class</span> <span class=\"title class_\">_Tp</span>&gt;</span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"keyword\">constexpr</span> <span class=\"type\">const</span> <span class=\"type\">void</span>* __get_fallback_typeid() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &amp;__unique_typeinfo&lt;<span class=\"type\">remove_cv_t</span>&lt;<span class=\"type\">remove_reference_t</span>&lt;_Tp&gt;&gt;&gt;::__id;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>The static member <code>__id</code> of <code>__unique_typeinfo</code> is always equal to 0 but is a unique instance corresponding to type <code>__Tp</code> due to template specialization. Based on this, <code>std::any</code> gets the address of <code>__id</code> as a fallback type id if RTTI is disabled (compiling with flag <code>-fno-rtti</code>).</p>\n<h1 id=\"Best-Practices\"><a href=\"#Best-Practices\" class=\"headerlink\" title=\"Best Practices\"></a>Best Practices</h1><p>In conclusion, the best practices of <code>std::any</code> include:</p>\n<ul>\n<li>To avoid unnecessary copying, use <code>std::make_any</code> or <code>std::in_place_type</code> to construct.</li>\n<li>Pass <code>std::any</code> by reference if possible.</li>\n<li>Use pointer version <code>std::any_cast&lt;T&gt;(&amp;a)</code> to avoid copying large objects.</li>\n<li>Let custom objects conform to <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\">the rule of three&#x2F;five&#x2F;zero</a> if managed by <code>std::any</code>.</li>\n</ul>\n<h1 id=\"Formatting-of-std-any-in-LLDB\"><a href=\"#Formatting-of-std-any-in-LLDB\" class=\"headerlink\" title=\"Formatting of std::any in LLDB\"></a>Formatting of <code>std::any</code> in LLDB</h1><p>Both belonging to Project LLVM, LLDB does not provide a formatted display of <code>std::any</code> of libcxx (while GDB does with libstdc++). Printing <code>std::any</code> in LLDB CLI will get:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(lldb) n</span><br><span class=\"line\">Process 76235 stopped</span><br><span class=\"line\">* thread #1, queue = &#x27;com.apple.main-thread&#x27;, stop reason = step over</span><br><span class=\"line\">    frame #0: 0x0000000100003a3c Play`main at main.cpp:17:5</span><br><span class=\"line\">   14          int main() &#123;</span><br><span class=\"line\">   15              std::any a = 1;</span><br><span class=\"line\"><span class=\"meta prompt_\">-&gt; </span><span class=\"language-bash\">16              <span class=\"built_in\">return</span> 0;</span></span><br><span class=\"line\">   17          &#125;</span><br><span class=\"line\">(lldb) fr v a</span><br><span class=\"line\">(std::any) $0 = &#123;</span><br><span class=\"line\">  __h = 0x0000000100003d2c (Play`std::__1::__any_imp::_SmallHandler&lt;int&gt;::__handle(std::__1::__any_imp::_Action, std::__1::any const*, std::__1::any*, std::type_info const*, void const*) at any:350)</span><br><span class=\"line\">  __s = &#123;</span><br><span class=\"line\">    __ptr = 0x0000000000000001</span><br><span class=\"line\">    __buf = (__lx = &quot;\\U00000001\\0\\0\\0\\0\\0\\0\\0\\U00000001\\0\\xc1\\x89FͽV\\0:\\0\\0\\U00000001&quot;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>It takes seconds to understand “a” is an int (from _SmallHandler’s type) and its value is 0x1 (from first 4 bytes of <code>__buf</code>). I write a Python script as a plugin based on LLDB API to print it more intuitively. </p>\n<script src=\"https://gist.github.com/TsaiHao/a0abaaa7272c917d5fc00e2bdc676969.js\"></script>\n\n<h2 id=\"Implementation-of-plugin\"><a href=\"#Implementation-of-plugin\" class=\"headerlink\" title=\"Implementation of plugin\"></a>Implementation of plugin</h2><p>There are 2 functions inside this script. <code>__lldb_init_module</code> is the entry of this plugin. <code>handle_std_any</code> is the processing handle used by LLDB.</p>\n<p>A tricky skill is catching the type name inside <code>_SmallHandler</code> using regex. After knowing that, we can find the object representing this type in python and then forcibly convert the pointer of buffer to it. This script should work for integers, floats, and <code>std::string</code>, but not very robust now. I will continually polish it.</p>\n<blockquote>\n<p>The same type-catching trick can also be employed in c++ source code. <code>__PRETTY_FUNCTION__</code> macro carries type name of a template function, so you can do some static reflections with it. A famous example is <a href=\"https://github.com/Neargye/magic_enum\">Magic Enum</a>.</p>\n</blockquote>\n<p>Another noticeable thing is that public classes of libcxx need special treatment because they have an inline namespace <code>__1</code>.</p>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"What-Is-std-any\"><a href=\"#What-Is-std-any\" class=\"headerlink\" title=\"What Is std::any\"></a>What Is <code>std::any</code></h1><p><code>std::any</code> is a new feature that comes with C++ 17 standard. It’s kind of <code>void*</code> with type-safety, supporting copy&#x2F;move&#x2F;store&#x2F;get, etc. Some basic usages of it can be found here: <a href=\"https://en.cppreference.com/w/cpp/utility/any\">std::any - cppreference</a></p>\n<p>Understanding how <code>std::any</code> is implemented can be gainful, for it taking advantage of many c++ skills, especially templates.</p>\n<h1 id=\"Implementation-of-std-any\"><a href=\"#Implementation-of-std-any\" class=\"headerlink\" title=\"Implementation of std::any\"></a>Implementation of <code>std::any</code></h1><p>The source code referred to below is <any> of llvm’s libcxx library, revision: <a href=\"https://github.com/llvm/llvm-project/blob/eb7d16ea25649909373e324e6ebf36774cabdbfa/libcxx/include/any\">any - libcxx</a>.</p>\n<h2 id=\"Class-Layout\"><a href=\"#Class-Layout\" class=\"headerlink\" title=\"Class Layout\"></a>Class Layout</h2><p><code>std::any</code> has two data members:</p>\n<ol>\n<li><p><code>__h_: _HandleFunPtr</code>, it’s a function pointer that points to a static function, as well as the entry of data manipulation including constructing&#x2F;destroying&#x2F;copying&#x2F;access, etc. Prototype of the function is:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*******</span></span><br><span class=\"line\"><span class=\"comment\">* arg1: Enum, kind of the manipulation, (_Destroy, _Copy, _Move, _Get, _TypeInfo)</span></span><br><span class=\"line\"><span class=\"comment\">* arg2: Caller&#x27;s &quot;this&quot; pointer</span></span><br><span class=\"line\"><span class=\"comment\">* arg3: Destination any, used in copy, move</span></span><br><span class=\"line\"><span class=\"comment\">* arg4: Runtime type info, always nullptr if rtti is disabled</span></span><br><span class=\"line\"><span class=\"comment\">* arg5: Fallback type info, described in next chapter</span></span><br><span class=\"line\"><span class=\"comment\">*******/</span></span><br><span class=\"line\"><span class=\"keyword\">using</span> _HandleFuncPtr =  <span class=\"type\">void</span>* (*)(_Action, any <span class=\"type\">const</span> *, any *, <span class=\"type\">const</span> type_info *,</span><br><span class=\"line\">                                        <span class=\"type\">const</span> <span class=\"type\">void</span>* __fallback_info);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p><code>__s_: _Storage</code>, stores pointer to managing data. It’s declared as a union for separately handling large and small objects.</p>\n</li>\n</ol>\n<p>In conclusion, <code>std::any</code> is basically equal to an aggregate of a data block and a predefined manipulation function, which proves the famous saying <strong>Algorithms + Data Structures &#x3D; Programs</strong> to some extent.</p>\n<h2 id=\"Skills-of-Implementation\"><a href=\"#Skills-of-Implementation\" class=\"headerlink\" title=\"Skills of Implementation\"></a>Skills of Implementation</h2><h3 id=\"Small-objects-optimization\"><a href=\"#Small-objects-optimization\" class=\"headerlink\" title=\"Small objects optimization\"></a>Small objects optimization</h3><blockquote>\n<p>Implementations are encouraged to avoid dynamic allocations for small objects.    – cpp refrence</p>\n</blockquote>\n<p>The data pointer <code>__s_</code> is not a <code>void*</code> but privately declared as a such union:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">using</span> _Buffer = <span class=\"type\">aligned_storage_t</span>&lt;<span class=\"number\">3</span>*<span class=\"built_in\">sizeof</span>(<span class=\"type\">void</span>*), alignment_of&lt;<span class=\"type\">void</span>*&gt;::value&gt;;</span><br><span class=\"line\"><span class=\"keyword\">union</span> <span class=\"title class_\">_Storage</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">constexpr</span> _Storage() : __ptr(<span class=\"literal\">nullptr</span>) &#123;&#125;</span><br><span class=\"line\">    <span class=\"type\">void</span> *  __ptr;</span><br><span class=\"line\">    __any_imp::_Buffer __buf;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>In a 64-bit machine, <code>_Storage</code> occupies 24 bytes. <code>__buf</code> is equally a <code>void*</code>, used when the contained object is no larger than 24 bytes. Utilizing the benefits of stack memory, constructing or copying these small objects could be more effective. Larger objects, on the other hand, have to be stored on heap memory and allocated dynamically in runtime.</p>\n<p>“24 bytes” is a curated threshold that is exactly the size of <code>std::vector</code> &#x2F;<code>std::string</code> and many other STL containers in libcxx. This fact means <code>std::any</code> can manage these common objects faster, though the memory inside them could still be dynamic.</p>\n<p>A similar memory optimization technology is also applied on <code>std::string</code>, but subtler. I will introduce it in the future.</p>\n<h3 id=\"In-place-Construct\"><a href=\"#In-place-Construct\" class=\"headerlink\" title=\"In-place Construct\"></a>In-place Construct</h3><p>When a <code>std::any</code> object is copied, the object managed by it is also copied. It’s pretty straight yet important, simply <code>memcpy</code> is not enough because some classes have essential things to do, such as <code>std::shared_ptr</code>. <code>std::any</code>s copy object with its own copy constructor through allocator. It also applies to move construction.</p>\n<p>But what about the constructor itself? Like <code>emplace_back</code> for <code>std::vector</code>, <code>std::any</code> also has an emplace-like constructor, in which the object is directly constructed on <code>__buf</code> instead of constructing a temporary object and then moving it.</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">std::any <span class=\"title\">a</span><span class=\"params\">(std::in_place_type&lt;std::string&gt;, <span class=\"string\">&quot;hello&quot;</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\">std::any <span class=\"title\">b</span><span class=\"params\">(<span class=\"string\">&quot;hello&quot;</span>)</span></span>;</span><br></pre></td></tr></table></figure>\n\n<p>By inspecting these 2 variables in a debugger, we can acknowledge that <code>std::in_place_type&lt;std::string&gt;</code> has two folder meanings, it tells <code>std::any</code> constructing a <code>std::string</code> instead of a <code>const char*</code> and constructing it directly.</p>\n<h3 id=\"Type-to-int-mapping\"><a href=\"#Type-to-int-mapping\" class=\"headerlink\" title=\"Type to int mapping\"></a>Type to int mapping</h3><p>Obviously, <code>std::any</code> is not a template class itself, but it can throw exceptions when casting it to a different static type even if RTTI(run-time type info) is disabled. The secret of this type-safety is a mapping from type to an integer.</p>\n<p>On line 162 of <code>any.h</code>, a type-unique template struct is defined as:</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">class</span> <span class=\"title class_\">_Tp</span>&gt;</span><br><span class=\"line\"><span class=\"keyword\">struct</span> <span class=\"title class_\">__unique_typeinfo</span> &#123; </span><br><span class=\"line\">    <span class=\"type\">static</span> <span class=\"keyword\">constexpr</span> <span class=\"type\">int</span> __id = <span class=\"number\">0</span>; </span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get type id if rtti is disabled</span></span><br><span class=\"line\"><span class=\"keyword\">template</span> &lt;<span class=\"keyword\">class</span> <span class=\"title class_\">_Tp</span>&gt;</span><br><span class=\"line\"><span class=\"keyword\">inline</span> <span class=\"keyword\">constexpr</span> <span class=\"type\">const</span> <span class=\"type\">void</span>* __get_fallback_typeid() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &amp;__unique_typeinfo&lt;<span class=\"type\">remove_cv_t</span>&lt;<span class=\"type\">remove_reference_t</span>&lt;_Tp&gt;&gt;&gt;::__id;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>The static member <code>__id</code> of <code>__unique_typeinfo</code> is always equal to 0 but is a unique instance corresponding to type <code>__Tp</code> due to template specialization. Based on this, <code>std::any</code> gets the address of <code>__id</code> as a fallback type id if RTTI is disabled (compiling with flag <code>-fno-rtti</code>).</p>\n<h1 id=\"Best-Practices\"><a href=\"#Best-Practices\" class=\"headerlink\" title=\"Best Practices\"></a>Best Practices</h1><p>In conclusion, the best practices of <code>std::any</code> include:</p>\n<ul>\n<li>To avoid unnecessary copying, use <code>std::make_any</code> or <code>std::in_place_type</code> to construct.</li>\n<li>Pass <code>std::any</code> by reference if possible.</li>\n<li>Use pointer version <code>std::any_cast&lt;T&gt;(&amp;a)</code> to avoid copying large objects.</li>\n<li>Let custom objects conform to <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\">the rule of three&#x2F;five&#x2F;zero</a> if managed by <code>std::any</code>.</li>\n</ul>\n<h1 id=\"Formatting-of-std-any-in-LLDB\"><a href=\"#Formatting-of-std-any-in-LLDB\" class=\"headerlink\" title=\"Formatting of std::any in LLDB\"></a>Formatting of <code>std::any</code> in LLDB</h1><p>Both belonging to Project LLVM, LLDB does not provide a formatted display of <code>std::any</code> of libcxx (while GDB does with libstdc++). Printing <code>std::any</code> in LLDB CLI will get:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(lldb) n</span><br><span class=\"line\">Process 76235 stopped</span><br><span class=\"line\">* thread #1, queue = &#x27;com.apple.main-thread&#x27;, stop reason = step over</span><br><span class=\"line\">    frame #0: 0x0000000100003a3c Play`main at main.cpp:17:5</span><br><span class=\"line\">   14          int main() &#123;</span><br><span class=\"line\">   15              std::any a = 1;</span><br><span class=\"line\"><span class=\"meta prompt_\">-&gt; </span><span class=\"language-bash\">16              <span class=\"built_in\">return</span> 0;</span></span><br><span class=\"line\">   17          &#125;</span><br><span class=\"line\">(lldb) fr v a</span><br><span class=\"line\">(std::any) $0 = &#123;</span><br><span class=\"line\">  __h = 0x0000000100003d2c (Play`std::__1::__any_imp::_SmallHandler&lt;int&gt;::__handle(std::__1::__any_imp::_Action, std::__1::any const*, std::__1::any*, std::type_info const*, void const*) at any:350)</span><br><span class=\"line\">  __s = &#123;</span><br><span class=\"line\">    __ptr = 0x0000000000000001</span><br><span class=\"line\">    __buf = (__lx = &quot;\\U00000001\\0\\0\\0\\0\\0\\0\\0\\U00000001\\0\\xc1\\x89FͽV\\0:\\0\\0\\U00000001&quot;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>It takes seconds to understand “a” is an int (from _SmallHandler’s type) and its value is 0x1 (from first 4 bytes of <code>__buf</code>). I write a Python script as a plugin based on LLDB API to print it more intuitively. </p>\n<script src=\"https://gist.github.com/TsaiHao/a0abaaa7272c917d5fc00e2bdc676969.js\"></script>\n\n<h2 id=\"Implementation-of-plugin\"><a href=\"#Implementation-of-plugin\" class=\"headerlink\" title=\"Implementation of plugin\"></a>Implementation of plugin</h2><p>There are 2 functions inside this script. <code>__lldb_init_module</code> is the entry of this plugin. <code>handle_std_any</code> is the processing handle used by LLDB.</p>\n<p>A tricky skill is catching the type name inside <code>_SmallHandler</code> using regex. After knowing that, we can find the object representing this type in python and then forcibly convert the pointer of buffer to it. This script should work for integers, floats, and <code>std::string</code>, but not very robust now. I will continually polish it.</p>\n<blockquote>\n<p>The same type-catching trick can also be employed in c++ source code. <code>__PRETTY_FUNCTION__</code> macro carries type name of a template function, so you can do some static reflections with it. A famous example is <a href=\"https://github.com/Neargye/magic_enum\">Magic Enum</a>.</p>\n</blockquote>\n<p>Another noticeable thing is that public classes of libcxx need special treatment because they have an inline namespace <code>__1</code>.</p>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"clebil42r0002dvn79n70gdub","category_id":"clebil42t0004dvn7d7nmcsc2","_id":"clebil42t0008dvn78fvac0x2"}],"PostTag":[{"post_id":"clebil42q0001dvn76flk6jd8","tag_id":"clebil42s0003dvn79fqah89x","_id":"clebil42t0006dvn7889q9gwx"},{"post_id":"clebil42r0002dvn79n70gdub","tag_id":"clebil42t0005dvn7gjd77gvi","_id":"clebil42t0009dvn7eu8ab8hm"},{"post_id":"clebil42r0002dvn79n70gdub","tag_id":"clebil42t0007dvn7dao4el0b","_id":"clebil42t000advn7bct9h3ov"}],"Tag":[{"name":"algorithm","_id":"clebil42s0003dvn79fqah89x"},{"name":"c++","_id":"clebil42t0005dvn7gjd77gvi"},{"name":"libc++","_id":"clebil42t0007dvn7dao4el0b"}]}}